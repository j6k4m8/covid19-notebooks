(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(18);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.a.mixinEvents(this)}var t,n,r;return t=e,(n=[{key:"_dispatchEvent",value:function(e,t,n){var i=this;if("string"==typeof e)i.emit(e,{type:e,target:n||i,data:t});else if("object"===a(e)&&e.hasOwnProperty("type")){var o=e;i.emit(o.type,{target:o.target,type:o.type,data:o.data})}}},{key:"addOnceEventListener",value:function(e,t,n){this.on(e,t,n,!0)}},{key:"addEventListener",value:function(e,t,n){this.on(e,t,n)}},{key:"removeEventListener",value:function(e,t){this.off(e,t)}},{key:"removeAllListeners",value:function(e){this.off(e)}},{key:"mixin",value:function(e){var t;i.a.mixinEvents(e),(t=void 0!==e.prototype?e.prototype:e)._dispatchEvent=function(t,n,i){if("string"==typeof t)e.emit(t,{type:t,target:i||e,data:n});else if("object"===a(t)&&t.hasOwnProperty("type")){var o=t;e.emit(o.type,{type:o.type,target:o.target,data:o.data})}},t.addOnceEventListener=function(t,n,i){e.on(t,n,i,!0)},t.addEventListener=function(t,n,i){e.on(t,n,i)},t.removeEventListener=function(t,n){e.off(t,n)},t.removeAllListeners=function(t){e.off(t)}}}])&&o(t.prototype,n),r&&o(t,r),e}()},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n(11),a=n(2),o=n(0),r=n(3);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=new a.a("VIDEO-BASE"),v=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=l(t).call(this))||"object"!==d(i)&&"function"!=typeof i?u(n):i).video=null,e._poster=null,e._pastFirstQuartile=!1,e._pastMidpoint=!1,e._pastThirdQuartile=!1,e._bufferedTime=0,e._source=null,e.fastSeekEnabled=!1,e._isEnabled=!0,e._isRemoved=!1,e.type="native",e.videoPlayCount=0,e.cors=null,e.containerId=null,e.videoId=null,e.sourceChanged=!1,e._isAd=!1,e.buffered=0,e.ended=!1,e.paused=!1,e.muted=!0,e.fullscreen=!1,e.videoWidth=NaN,e.videoHeight=NaN,e.metadata=null,e.currentTime=0,e.duration=0,e.startTime=0,e.width=0,e.height=0,e.playing=!1,e.parent=null,e.canplay=!1,e.canplaythrough=!1,e.volume=1,e.loop=null,e.stopped=!1,e.hasStarted=!1,e.qualityChanged=!1,e.seekTime=null,e.adsCuepoints=[],e.previousCuepointIndex=-1,e.currentQuality=null,e.relatedVideos=[],e.autoplay=!1,e.waiting=!1,e._stalled=!1,e._originalSource=null,e._onLoadStart=e._onLoadStart.bind(u(e)),e._onLoadedMetadata=e._onLoadedMetadata.bind(u(e)),e._onLoadedData=e._onLoadedData.bind(u(e)),e._onDurationChanged=e._onDurationChanged.bind(u(e)),e._onPlay=e._onPlay.bind(u(e)),e._onPause=e._onPause.bind(u(e)),e._onSeeked=e._onSeeked.bind(u(e)),e._onTimeUpdate=e._onTimeUpdate.bind(u(e)),e._onWaiting=e._onWaiting.bind(u(e)),e._onPlaying=e._onPlaying.bind(u(e)),e._onProgress=e._onProgress.bind(u(e)),e._onCanPlay=e._onCanPlay.bind(u(e)),e._onCanPlayThrough=e._onCanPlayThrough.bind(u(e)),e._onVolumeChange=e._onVolumeChange.bind(u(e)),e._onEnded=e._onEnded.bind(u(e)),e._onEmptied=e._onEmptied.bind(u(e)),e._onStalled=e._onStalled.bind(u(e)),e._onError=e._onError.bind(u(e)),e._onAbort=e._onAbort.bind(u(e)),e}var i,a,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),i=t,(a=[{key:"_init",value:function(e,t,n){if(this._isAd=n,this.containerId=e,this.videoId=t,this.video=document.getElementById(t),this.parent=this.video.parentNode,this._source=this.video.src,this.startTime=this.video.startTime||0,this.width=this.video.clientWidth,this.height=this.video.clientHeight,this.volume=this.video.getAttribute("volume")||1,this.muted=this.video.muted,this.videoHeight=this.video.clientHeight,this.videoWidth=this.video.clientWidth,!n){if(this.loop=window.CurrentVideoConfig.settings.loop,this._poster=window.CurrentVideoConfig.settings.poster,!this._poster){var i=window.CurrentVideoConfig.content.posterVersions;i?window.client.browser.chrome&&i.webp?this._poster=i.webp:i.optimized&&(this._poster=i.optimized):window.CurrentVideoConfig&&window.CurrentVideoConfig.content?this._poster=window.CurrentVideoConfig.content.poster:this._poster=this.video.poster}this._poster=Object(o.s)(this._poster),h.debug("Poster",this._poster),this.currentQuality=window.CurrentVideoConfig.settings.defaultHd?"hd":"sd",this.onVideoConfigChanged()}}},{key:"isAd",value:function(e){h.debug("isAd() ABSTRACT METHOD")}},{key:"preload",value:function(){var e=this,t=document.body.getAttribute("data-default-src");e._isAd||null!==e._source&&""!==e._source||e.setSource(t),h.debug("Preload source",{id:e.containerId,src:e._source}),e._isEnabled||e.enable(!0),e.hls&&e.hls.destroy(),e._source.indexOf(".m3u8")>-1&&!window.client.nativeHLS?(e.hlsLoading=!0,n.e(10).then(n.t.bind(null,35,7)).then((function(t){var n=t.default;e.hls=new n,e.hls.ErrorTypes=n.ErrorTypes,e.hls.ErrorDetails=n.ErrorDetails,e.hls.DefaultConfig=n.DefaultConfig,e.hls.Events=n.Events,e.hls.attachMedia(e.video),e.hls.on(e.hls.Events.MANIFEST_PARSED,e._onHLSManifestParsed.bind(e)),e.hls.loadSource(e._source)}))):(e.video.src=e._source,window.window.client.browser.firefox>0&&e.video.setAttribute("preload","metadata"),e.video.load())}},{key:"_playVideo",value:function(){var e=this,t=e.video.play();void 0!==t&&t.then((function(){h.info("Autoplay worked, playing video")})).catch((function(t){e.pause(),h.warn("Caught Error (Play promise)",{message:t.message,stack:t.stack})}))}},{key:"_onHLSManifestParsed",value:function(e,t){h.info("HLS manifest loaded, found ".concat(t.levels.length," quality level")),window.BoltAdManager&&window.BoltAdManager.sequentialPrerollAdRequested||this.play()}},{key:"play",value:function(){h.debug("Play",{id:this.containerId}),this.show(!0),this.ended?this.replay():(this._isEnabled||this.enable(!0),this._playVideo())}},{key:"replay",value:function(){h.debug("Replay",{id:this.containerId}),this.ended=!1,this.fastSeekEnabled?(h.debug("Pseudostream replay",{id:this.containerId,startTime:this.startTime}),this.startTime>0?(this.autoplay=!0,this.seek(0)):(this.stop(),this.play())):(this.autoplay=!0,this.seek(0))}},{key:"pause",value:function(){h.debug("Pause",{id:this.containerId,time:this.currentTime}),this.paused=!0,this.video.pause()}},{key:"resume",value:function(){this.playing||(h.debug("Resume",{id:this.containerId,time:this.video.currentTime}),this.show(!0),this._playVideo())}},{key:"stop",value:function(){this.stopped||(h.debug("Stop",{id:this.containerId}),this.stopped=!0,this.video.pause(),this.video.currentTime=0)}},{key:"seek",value:function(e){var t=e/this.duration*100;this._pastThirdQuartile=t>=75,this._pastMidpoint=t>=50||this._pastThirdQuartile,this._pastFirstQuartile=t>=25||this._pastMidpoint,this._pastFirstQuartile&&h.info("Seeking past first quartile"),this._pastMidpoint&&h.info("Seeking past midpoint"),this._pastThirdQuartile&&h.info("Seeking past third quartile")}},{key:"mute",value:function(e){h.warn("ABSTRACT METHOD NO OP")}},{key:"setVolume",value:function(e){h.warn("ABSTRACT METHOD NO OP")}},{key:"remove",value:function(e){h.debug("Remove",{id:this.containerId,videoId:this.videoId}),this._isRemoved=!0,this.video&&(this._disableVideoListeners(),this.video.pause(),this.video.src="",this.video.poster="",!0===e?(this.video.parentNode.removeChild(this.video),this.video=null):this._enableVideoListeners()),this._dispatchEvent(r.a.Player.Event.REMOVED),this.removeAllListeners()}},{key:"setSource",value:function(e){e=Object(o.s)(e),this._isRemoved=!1,this._originalSource=e,this.resetQuartiles(),this.metadata=null,this.playing=!1,this.hasStarted=!1,this.paused=!1,this.ended=!1,this.sourceChanged=!0,this.duration=0,this.buffered=0,this._bufferedTime=0,this.startTime=0,this.currentTime=0,this.waiting=!1,this._dispatchEvent(r.a.Media.Event.START_TIME_CHANGED,this.startTime),this._dispatchEvent(r.a.Player.Event.CONTENT_CHANGED),this.fastSeekEnabled=Object(o.c)(e),h.debug("Pseudo streaming enabled",{id:this.containerId,fastSeek:this.fastSeekEnabled}),this._enableVideoListeners(),this._updateVideoSource(e)}},{key:"setQuality",value:function(e,t){e!==this.currentQuality&&(h.debug("setQuality",{id:this.containerId,quality:e,url:t}),this._originalSource=t,this.autoplay=!0,this.currentQuality=e,this.qualityChanged=!0,this._dispatchEvent(r.a.Player.Event.QUALITY_CHANGED,this.currentQuality),this._updateVideoSource(t))}},{key:"_updateVideoSource",value:function(e){h.warn("ABSTRACT METHOD NO OP")}},{key:"getSource",value:function(){return this._source}},{key:"size",value:function(e,t){this.video.setAttribute("width",e),this.video.setAttribute("height",t),this.width=this.video.clientWidth,this.height=this.video.clientHeight,this._dispatchEvent(r.a.Player.Event.SIZE_CHANGED)}},{key:"setFullscreen",value:function(e){e!==this.fullscreen&&(this.fullscreen=e)}},{key:"show",value:function(e){!0===e&&"block"!==this.video.style.display?(h.debug("Show video",{id:this.containerId}),this.video.style.display="block"):!1===e&&"none"!==this.video.style.display&&(h.debug("Hide video",{id:this.containerId}),this.video.style.display="none")}},{key:"hitAdCuepoint",value:function(e){this.previousCuepointIndex=window.CurrentVideoConfig.advertising.cuepoints.indexOf(e)}},{key:"unload",value:function(){var e=this;h.info("Unload video",{id:e.containerId,src:this.video.currentSrc}),e._isRemoved=!0,e._disableVideoListeners(),e.hls?e.hls.destroy():(e.video.src="",e.video.load())}},{key:"enable",value:function(e){this._isEnabled=e,!0===e?(h.info("Enable Video",{id:this.containerId}),this._enableVideoListeners(),this.setSource(this._source)):(h.info("Disable Video",{id:this.containerId}),this.unload())}},{key:"_onDurationChanged",value:function(){h.warn("ABSTRACT METHOD NO OP")}},{key:"_onPlay",value:function(){this.stopped=!1,this.ended=!1,this.hasStarted?this.paused&&(this.paused=!1,this._dispatchEvent(r.a.Media.Event.RESUME)):(h.info("Dispatching play event"),this._dispatchEvent(r.a.Media.Event.PLAY),this.hasStarted=!0)}},{key:"_onPause",value:function(){h.info("onPause",{id:this.containerId,time:this.currentTime}),this.paused=!0,this.playing=!1,this._dispatchEvent(r.a.Media.Event.PAUSED),this.stopped&&this._dispatchEvent(r.a.Media.Event.STOPPED)}},{key:"_onSeeked",value:function(){h.info("onSeeked"),this.stopped||(this._dispatchEvent(r.a.Media.Event.SEEKED),this.autoplay&&this._playVideo()),this.seekTime=null}},{key:"_onTimeUpdate",value:function(){if(this.video){if(this._stalled=!1,this.qualityChanged)h.info("Quality changed",{id:this.containerId,quality:this.qualityChanged});else if(this.currentTime=this.video.currentTime+this.startTime,this.currentTime>this.duration&&(this.currentTime=this.duration),this._dispatchEvent(r.a.Media.Event.TIME_UPDATE,this.currentTime),this._checkQuartiles(),window.client.system.android>0&&28===window.client.browser.chrome&&Math.floor(this.currentTime)===Math.floor(this.video.duration)){var e=new CustomEvent("ended");this.video.dispatchEvent(e)}}else h.error("Video is null ".concat(this.containerId))}},{key:"_onWaiting",value:function(){this.waiting=!0,this._dispatchEvent(r.a.Media.Event.WAITING)}},{key:"_onPlaying",value:function(){h.debug("onPlaying",{id:this.containerId}),this.playing=!0,this.paused=!1,this._dispatchEvent(r.a.Media.Event.PLAYING)}},{key:"_onProgress",value:function(){try{var e=this.fastSeekEnabled?this.video.buffered.end(0)+this.startTime:this.video.buffered.end(0);e!==this._bufferedTime&&(e>this._bufferedTime&&(this._bufferedTime=e),this.buffered=Math.round(100*this._bufferedTime/this.duration),this.buffered>100&&(this.buffered=100))}catch(e){this.buffered=0,this._bufferedTime=0}this._dispatchEvent(r.a.Media.Event.LOAD_PROGRESS,this.buffered)}},{key:"_onLoadedMetadata",value:function(){this.metadata||(this.metadata={duration:this.video.duration,videoWidth:this.video.videoWidth,videoHeight:this.video.videoHeight},h.debug("Video metadata",{id:this.containerId}),this._dispatchEvent(r.a.Media.Event.METADATA,this.metadata))}},{key:"_onCanPlay",value:function(){h.debug("onCanPlay",{id:this.containerId}),this.waiting=!1,this.canplay=!0,this._dispatchEvent(r.a.Player.Event.CANPLAY),this._stalled&&(h.debug("onCanPlay after stalled",{id:this.containerId}),this._stalled=!1,this._playVideo())}},{key:"_onCanPlayThrough",value:function(){this.canplaythrough=!0,this._dispatchEvent(r.a.Player.Event.CANPLAYTHROUGH)}},{key:"_onVolumeChange",value:function(){this.volume=this.video.volume,h.info("onVolumeChange",{value:this.volume}),this._dispatchEvent(r.a.Media.Event.VOLUME_CHANGED,this.volume)}},{key:"_onEnded",value:function(){this._isAd||h.debug("onEnded",{id:this.containerId}),this.ended=!0,this.playing=!1,this.paused=!1,this.hasStarted=!1,this._dispatchEvent(r.a.Media.Event.ENDED)}},{key:"_onEmptied",value:function(){this._isRemoved||this.sourceChanged||(this._isAd||h.debug("onEmptied",{id:this.containerId}),this._dispatchEvent(r.a.Media.Event.EMPTIED))}},{key:"_onStalled",value:function(){this._isRemoved||(this._stalled=!0,this.playing&&(h.debug("Video stalled, calling play",{id:this.containerId}),this._playVideo()))}},{key:"_onError",value:function(){var e="";if(!this._isRemoved){if(this.video.error.code)switch(this.video.error.code){case 1:e="USER ABORT";break;case 2:e="NETWORK ERROR";break;case 3:e="DECODE ERROR";break;case 4:e="MEDIA NOT SUPPORTED"}h.error("Video Error: ".concat(this.containerId),{message:e,errorCode:this.video.error.code}),4===this.video.error.code?window.client.browser.firefoxWithoutMp4&&this._source.indexOf(".mp4")>-1&&!window.client.hasFlash?this._dispatchEvent(r.a.Media.Event.NOT_SUPPORTED):this._dispatchEvent(r.a.Media.Event.NOT_FOUND):""===this.video.src||this._isRemoved||this.sourceChanged||this._dispatchEvent(r.a.ERROR)}}},{key:"_onLoadedData",value:function(){this._isLoading=!1,h.debug("onLoadedData",{id:this.containerId}),this._dispatchEvent(r.a.Media.Event.LOADED)}},{key:"_onLoadStart",value:function(){this.video&&(this._isLoading=!0,h.debug("onLoadStart",{id:this.containerId}),this._dispatchEvent(r.a.Media.Event.WAITING))}},{key:"_onAbort",value:function(e){h.debug("onAbort",{id:this.containerId})}},{key:"_enableVideoListeners",value:function(){h.debug("Enable video listeners",{videoId:this.videoId}),this.video.addEventListener("loadstart",this._onLoadStart),this.video.addEventListener("loadedmetadata",this._onLoadedMetadata),this.video.addEventListener("loadeddata",this._onLoadedData),this.video.addEventListener("durationchange",this._onDurationChanged),this.video.addEventListener("play",this._onPlay),this.video.addEventListener("pause",this._onPause),this.video.addEventListener("seeked",this._onSeeked),this.video.addEventListener("timeupdate",this._onTimeUpdate),this.video.addEventListener("waiting",this._onWaiting),this.video.addEventListener("playing",this._onPlaying),this.video.addEventListener("progress",this._onProgress),this.video.addEventListener("canplay",this._onCanPlay),this.video.addEventListener("canplaythrough",this._onCanPlayThrough),this.video.addEventListener("volumechange",this._onVolumeChange),this.video.addEventListener("ended",this._onEnded),this.video.addEventListener("emptied",this._onEmptied),this.video.addEventListener("stalled",this._onStalled),this.video.addEventListener("error",this._onError),this.video.addEventListener("abort",this._onAbort)}},{key:"_disableVideoListeners",value:function(){h.debug("Disable video listeners",{id:this.containerId}),this.video.removeEventListener("loadstart",this._onLoadStart),this.video.removeEventListener("loadedmetadata",this._onLoadedMetadata),this.video.removeEventListener("loadeddata",this._onLoadedData),this.video.removeEventListener("durationchange",this._onDurationChanged),this.video.removeEventListener("play",this._onPlay),this.video.removeEventListener("pause",this._onPause),this.video.removeEventListener("seeked",this._onSeeked),this.video.removeEventListener("timeupdate",this._onTimeUpdate),this.video.removeEventListener("waiting",this._onWaiting),this.video.removeEventListener("playing",this._onPlaying),this.video.removeEventListener("progress",this._onProgress),this.video.removeEventListener("canplay",this._onCanPlay),this.video.removeEventListener("canplaythrough",this._onCanPlayThrough),this.video.removeEventListener("volumechange",this._onVolumeChange),this.video.removeEventListener("ended",this._onEnded),this.video.removeEventListener("emptied",this._onEmptied),this.video.removeEventListener("stalled",this._onStalled),this.video.removeEventListener("error",this._onError),this.video.removeEventListener("abort",this._onAbort),this.video.removeEventListener("ended",this._onEnded)}},{key:"onVideoConfigChanged",value:function(){(this.playing||this.paused)&&this.enable(!1);var e=window.CurrentVideoConfig;this._poster=e.content.poster,void 0===this.loop&&void 0===window.Playlist&&(this.loop=e?e.settings.loop:this.loop),this.adsCuepoints=void 0!==e.advertising.cuepoints?e.advertising.cuepoints.concat():[],this._dispatchEvent(r.a.Player.Event.CONFIG_CHANGED)}},{key:"resetQuartiles",value:function(){this._pastFirstQuartile=!1,this._pastMidpoint=!1,this._pastThirdQuartile=!1}},{key:"_checkQuartiles",value:function(){if(this.currentTime&&this.duration){var e=this.currentTime/this.duration*100;!this._pastFirstQuartile&&e>=25?(this._pastFirstQuartile=!0,this._dispatchEvent(r.a.Media.Event.FIRSTQUARTILE,null)):!this._pastMidpoint&&e>=50?(this._pastMidpoint=!0,this._dispatchEvent(r.a.Media.Event.MIDPOINT,null)):!this._pastThirdQuartile&&e>=75&&(this._pastThirdQuartile=!0,this._dispatchEvent(r.a.Media.Event.THIRDQUARTILE,null))}}}])&&s(i.prototype,a),v&&s(i,v),t}(i.a)},18:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function(){var e=1;if(!Object.create)var t=function(){};var n=Array.prototype.slice,a={attributes:{},eventHandlers:{"-1":{}},guid:-1,addEvent:function(e){a.eventHandlers[e.guid][e.type]||(a.eventHandlers[e.guid][e.type]=[]),a.eventHandlers[e.guid][e.type].push({guid:e.guid,handler:e.handler,scope:e.scope,type:e.type,once:e.once})},addEventHandler:function(e,t,n,i){var o,r={};for(var d in"string"==typeof e?(o=n||!1,r[e]=t):(o=t||!1,r=e),r)for(var s=r[d],l=d.split(" "),u=0,c=l.length;u<c;u++){var h=l[u];a.addEvent.call(this,{guid:this._guid||this._.guid,handler:s,scope:o,type:h,once:i})}},addGuid:function(t,n){t._guid&&!n||(t._guid=e++,a.attributes[t._guid]={},a.eventHandlers[t._guid]={})},attr:function(e){return a.attributes[e]},clone:function(e){var t=a.typeOf(e);return"object"===t?a.extend({},e):"array"===t?e.slice(0):void 0},create:function(e){return Object.create?Object.create(e):(t.prototype=e,new t)},emitEvents:function(e,t,i,o){i=i||!1,o=o||this._guid;for(var r=n.call(a.eventHandlers[o][e]),d=0,s=r.length;d<s;d++){var l=a.extend({},r[d]),u=l.scope?l.scope:this;i&&(l.type=i),l.scope=u,l.handler.call(l.scope,t,l),l.once&&a.removeEventHandler.call(this,l.type,l.handler)}},extend:function(){for(var e=n.call(arguments),t=e.shift(),i=0,a=e.length;i<a;i++){var o=e[i];for(var r in o)t[r]=o[r]}return t},extendThis:function(){var e=n.call(arguments);return e.unshift(this),a.extend.apply(this,e)},makeUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},removeAttribute:function(e,t){t=t||!1;for(var n=a.trim(e).split(" "),i={},o=0,r=n.length;o<r;o++){var d=a.trim(n[o]);d&&(i.key=d,i.oldValue=a.attr(this._guid)[d],delete a.attr(this._guid)[d],t||(this.emit("change",d),this.emit("change:"+d),this.emit("mutate",i),this.emit("mutate:"+d,i),this.emit("remove",d),this.emit("remove:"+d)),delete i.oldValue)}},removeEventHandler:function(e,t){var n=a.eventHandlers[this._guid];if(e&&t){if(!(n=n[e]))return;for(var i,o=0,r=n.length;o<r;o++)(i=n[o].handler)&&i===t&&(n.splice(o--,1),r--)}else e?delete n[e]:a.eventHandlers[this._guid]={}},setAttribute:function(e,t,n){n=n||!1;var i=this.has(e),o=a.attr(this._guid)[e];if(t!==o&&(a.attr(this._guid)[e]=t,!n)){this.emit("change",e),this.emit("change:"+e,t);var r={key:e,newValue:t,oldValue:o||null};this.emit("mutate",r),this.emit("mutate:"+e,r);var d=i?"update":"create";this.emit(d,e),this.emit(d+":"+e,t)}},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},typeOf:function(e){return null==e?String(e):Object.prototype.toString.call(e).replace(/\[object |\]/g,"").toLowerCase()},updateAttribute:function(e,t,n){var i=this.get(e),o=a.typeOf(i);"object"!==o&&"array"!==o||(i=a.clone(i));var r=t.call(this,i,e);a.setAttribute.call(this,e,r,n||!1)}},o={emit:function(e,t){t=void 0===t?null:t;for(var n=e.split(" "),i=0,o=n.length;i<o;i++){var r=n[i];a.eventHandlers[-1].all&&a.emitEvents.call(this,"all",t,r,-1),a.eventHandlers[-1][r]&&a.emitEvents.call(this,r,t,r,-1),"number"==typeof this._guid&&(a.eventHandlers[this._guid].all&&a.emitEvents.call(this,"all",t,r),a.eventHandlers[this._guid][r]&&a.emitEvents.call(this,r,t))}},off:function(){a.removeEventHandler.apply(this,arguments)},on:function(){a.addEventHandler.apply(this,arguments)}};a.Module=function(){},a.Module.prototype={each:function(e,t){var n=a.attr(this._guid);for(var i in n){var o=n[i];e.call(t||this,o,i)}},extend:function(){return a.extendThis.apply(this,arguments)},filter:function(e){var t=[],n=a.attr(this._guid);for(var i in n)e.call(this,n[i],i)&&t.push(n[i]);return t},get:function(e){if("string"==typeof e){if(arguments.length>1){for(var t={},n=0,i=arguments.length;n<i;n++){var o=arguments[n];t[o]=this.get(o)}return t}return this.has(e)?a.attr(this._guid)[e]:null}if("function"==typeof e){var r=this.filter(e);return r.length?r[0]:null}},getAll:function(){return a.clone(a.attr(this._guid))},getAllAsArray:function(){var e=[],t=a.attr(this._guid);for(var n in t){var i=t[n];"object"!==a.typeOf(i)||i.id||(i.id=n),e.push(i)}return e},has:function(e){return void 0!==a.attr(this._guid)[e]},map:function(e,t){var n=[];return this.each((function(i,a){n.push(e.call(t||this,i,a))}),t||this),n},push:function(e,t){if("array"===a.typeOf(e))for(var n=0,i=e.length;n<i;n++)a.setAttribute.call(this,a.makeUuid(),e[n],t||!1);else a.setAttribute.call(this,a.makeUuid(),e,t||!1);return this},remove:function(e,t){return void 0===e?(a.attributes[this._guid]={},this.emit("change remove")):"function"==typeof e?this.each((function(n,i){e(n)&&a.removeAttribute.call(this,i,t)})):a.removeAttribute.call(this,e,t||!1),this},set:function(e,t,n){if("object"===i(e))for(var o in e)a.setAttribute.call(this,o,e[o],t||!1);else a.setAttribute.call(this,e,t,n||!1);return this},size:function(){var e=0,t=a.attr(this._guid);for(var n in t)e++;return e},update:function(e,t,n){return"string"==typeof e?a.updateAttribute.call(this,e,t,n||!1):"function"==typeof e&&this.each((function(t,n){a.updateAttribute.call(this,n,e)})),this}};var r={_:a,extend:function(){return a.extendThis.apply(a.Module.prototype,arguments)},mixinEvents:function(e){return e=e||{},a.addGuid(e),a.extend(e,o)},on:function(){a.addEventHandler.apply(this,arguments)},version:"0.8.1"};return window.Stapes=r,r}()},19:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var i=n(15),a=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=new(n(2).a)("IOS-VIDEO"),v=function(e){function t(e,n,i){var a,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=!(s=l(t).call(this))||"object"!==o(s)&&"function"!=typeof s?d(r):s,c(d(a),"hasBeenTouched",!1),c(d(a),"_isEnabled",!1);var u=d(a);return u._init(e,n,i),window.PlayerSettings.autoplay&&(u.hasBeenTouched=!0,u.mute(!0)),u.video.addEventListener("webkitendfullscreen",(function(){u.video.controls&&(u.video.controls=!1)})),a}var n,i,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(i=[{key:"_updateVideoSource",value:function(e){h.debug(this.containerId,"'updateSource:' ".concat(e,", 'autoplay:' ").concat(this.autoplay));var t=-1===e.indexOf("?")?"?":"&";this.qualityChanged&&this.fastSeekEnabled&&this.currentTime>0&&(t=-1===e.indexOf("?")?"?":"&",e="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)),e===this.video.src&&(t=-1===e.indexOf("?")?"?":"&",e=this._source+t+Date.now()),this._source=e,this.qualityChanged&&this.hasStarted&&this.preload()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"seek",value:function(e){h.debug("Seek",e),s(l(t.prototype),"seek",this).call(this,e);var n=this;n.seekTime=e;var i=function(){var t=-1===n._originalSource.indexOf("?")?"?":"&";n.startTime=e,n._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e),n.video.src=e>0?"".concat(n._originalSource+t,"ec_seek=").concat(e,"&start=").concat(e):n._source,n.video.load()};n.fastSeekEnabled?n.startTime>0?i():e<=n._bufferedTime?n.video.currentTime=e:i():(n.video.currentTime=e,n.playing||n.hasBeenTouched&&n.play())}},{key:"_onDurationChanged",value:function(){h.debug("On duration changed",{id:this.containerId,action:"durationChanged",duration:this.video.duration}),this.sourceChanged?(this.duration=this.video.duration,this._dispatchEvent(a.a.Media.Event.DURATION_CHANGE,this.duration),h.debug("On duration changed",{id:this.containerId,action:"sourceChanged",duration:this.video.duration}),this.sourceChanged=!1,this.hasBeenTouched&&this.autoplay&&this.play()):this.qualityChanged?h.debug("On duration changed",{id:this.containerId,action:"qualityChanged",duration:this.video.duration}):this.seekTime?(h.debug("On duration changed",{id:this.containerId,action:"seekTime",seek:this.seekTime,duration:this.video.duration}),this.fastSeekEnabled&&(this.seekTime=null,this.hasBeenTouched&&this.play())):this.autoplay&&this.hasBeenTouched&&(h.debug("Duration changed & play"),this.play())}},{key:"_onLoadedData",value:function(){if(this.qualityChanged)h.debug("On loaded data: new quality"),this.qualityChanged=!1,this.fastSeekEnabled?(this.startTime=this.currentTime,this._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,this.currentTime),this.hasBeenTouched&&this.play()):this.seek(this.currentTime);else if(h.debug("onLoadedData"),s(l(t.prototype),"_onLoadedData",this).call(this),window.client.system.ios&&window.PlayerView.fullscreen)try{this.video.webkitEnterFullscreen()}catch(e){h.warn("Caught Error",{message:e.message,stack:e.stack}),window.PlayerView.fullscreen=!1,window.PlayerView.setFullscreen(!1)}}},{key:"touch",value:function(){h.debug("Touch",{videoId:this.videoId}),this.enable(!1),this.hasBeenTouched=!0}},{key:"mute",value:function(e){this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(a.a.Media.Event.MUTED):this._dispatchEvent(a.a.Media.Event.UNMUTED)}}])&&r(n.prototype,i),v&&r(n,v),t}(i.a)},20:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var i=n(15),a=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=new(n(2).a)("MOBILE-VIDEO"),h=function(e){function t(e,n,i){var a,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=!(s=l(t).call(this))||"object"!==o(s)&&"function"!=typeof s?d(r):s;var u=d(a);return u._init(e,n,i),u.hasBeenTouched=!1,u._isEnabled=!1,window.client.system.android&&window.PlayerSettings.autoplay&&(u.hasBeenTouched=!0,u.mute(!0)),window.PlayerSettings.automute&&u.video.addEventListener("webkitbeginfullscreen",(function(){u.mute(!1)})),a}var n,i,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(i=[{key:"_init",value:function(e,n,i){s(l(t.prototype),"_init",this).call(this,e,n,i),c.debug("Init",{id:this.containerId})}},{key:"_updateVideoSource",value:function(e){c.debug("Update source",{id:this.containerId,src:e,currentSrc:this.video.src});var t=-1===e.indexOf("?")?"?":"&";this.qualityChanged&&this.fastSeekEnabled&&this.currentTime>0&&(t=-1===e.indexOf("?")?"?":"&",e="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)),e===this.video.src&&(t=-1===e.indexOf("?")?"?":"&",e=this._source+t+Date.now()),this._source=e,this.qualityChanged&&this.hasStarted&&this.preload()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"seek",value:function(e){c.debug("Seek",{val:e}),s(l(t.prototype),"seek",this).call(this,e);var n=this;n.seekTime=e;var i=function(){n.startTime=e,n._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e);var t=-1===n._originalSource.indexOf("?")?"?":"&";n.video.src=e>0?"".concat(n._originalSource+t,"ec_seek=").concat(e,"&start=").concat(e):n._source,n.video.load()};n.fastSeekEnabled?n.startTime>0?i():e<=n._bufferedTime?n.video.currentTime=e:i():(n.video.currentTime=e,n.playing||n.hasBeenTouched&&n.play())}},{key:"_onDurationChanged",value:function(){c.debug("On duration changed",{id:this.containerId,action:"durationChanged",duration:this.video.duration}),this.sourceChanged?(this.duration=this.video.duration,this._dispatchEvent(a.a.Media.Event.DURATION_CHANGE,this.duration),c.debug("On duration changed",{id:this.containerId,action:"sourcechanged",duration:this.video.duration}),this.sourceChanged=!1,this.hasBeenTouched&&this.autoplay&&this.play()):this.qualityChanged?(c.debug("On duration changed",{id:this.containerId,action:"qualityChanged",duration:this.video.duration}),this.fastSeekEnabled?(this.startTime=this.currentTime,this._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,this.currentTime),this.hasBeenTouched&&this.video.play()):this.seek(this.currentTime),this.qualityChanged=!1):this.seekTime?(c.debug("On duration changed",{id:this.containerId,action:"seekTime",seek:this.seekTime,duration:this.video.duration}),this.fastSeekEnabled&&(this.seekTime=null,this.hasBeenTouched&&this.video.play())):this.autoplay&&this.hasBeenTouched&&(c.debug("Duration changed & play"),this.video.play())}},{key:"touch",value:function(){c.debug("Touch",{videoId:this.videoId}),this.enable(!1),this.hasBeenTouched=!0}},{key:"mute",value:function(e){window.client.system.android&&(this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(a.a.Media.Event.MUTED):this._dispatchEvent(a.a.Media.Event.UNMUTED))}}])&&r(n.prototype,i),h&&r(n,h),t}(i.a)},21:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var i=n(15),a=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=new(n(2).a)("VIDEO"),h=function(e){function t(e,n,i,a){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=d(this,l(t).call(this)))._init(e,n,i,a),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(i=[{key:"_init",value:function(e,n,i){s(l(t.prototype),"_init",this).call(this,e,n,i),this.video.oncontextmenu=function(){return!1},this._source&&(this.setSource(this._source),c.debug("Pseudo streaming enabled",{fastSeek:this.fastSeekEnabled})),this._enableVideoListeners()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"mute",value:function(e){c.info("mute",e),this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(a.a.Media.Event.MUTED):this._dispatchEvent(a.a.Media.Event.UNMUTED)}},{key:"setVolume",value:function(e){var t=void 0===e?1:parseFloat(e);c.info("set volume",t),this.video.volume=t,this.volume=this.video.volume}},{key:"_updateVideoSource",value:function(e){if(c.debug("Update source",{id:this.containerId,url:e}),this._source=e,this.qualityChanged){if(this.fastSeekEnabled&&this.currentTime>0){var t=-1===e.indexOf("?")?"?":"&";this._source="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)}this.hasStarted&&this.preload()}}},{key:"_onDurationChanged",value:function(){var e=this;e.sourceChanged?(e.duration=e.video.duration,e._dispatchEvent(a.a.Media.Event.DURATION_CHANGE,e.duration),c.debug("On duration changed",{id:this.containerId,action:"sourceChanged",duration:this.video.duration}),e.sourceChanged=!1,!e.autoplay||window.BoltAdManager&&window.BoltAdManager.sequentialPrerollAdRequested||e.play()):e.qualityChanged?(c.debug("On duration changed",{id:this.containerId,action:"qualityChanged",duration:this.video.duration}),e.fastSeekEnabled?(e.startTime=e.currentTime,e._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e.currentTime),e.play()):e.seek(e.currentTime),e.qualityChanged=!1):e.seekTime?(c.debug("On duration changed",{id:this.containerId,action:"seekTime",seek:this.seekTime,duration:this.video.duration}),e.fastSeekEnabled&&(e.seekTime=null,e.play())):e.autoplay&&window.BoltAdManager&&!window.BoltAdManager.sequentialPrerollAdRequested&&e.play()}},{key:"seek",value:function(e){c.debug("Seek",e),s(l(t.prototype),"seek",this).call(this,e);var n=this;n.seekTime=e;var i=function(){n.startTime=e,n._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e);var t=-1===n._originalSource.indexOf("?")?"?":"&";window.client.browser.firefox>0?(n._disableVideoListeners(),n.video.addEventListener("emptied",(function i(){c.info("FF video reset"),n.video.removeEventListener("emptied",i),n.video.src=e>0?"".concat(n._originalSource+t,"ec_seek=").concat(e,"&start=").concat(e):n._source,n._enableVideoListeners(),n.video.load()})),n.video.src=""):(n.video.src=e>0?"".concat(n._originalSource+t,"ec_seek=").concat(e,"&start=").concat(e):n._source,n.video.load())};n.fastSeekEnabled?n.startTime>0?i():e<=n._bufferedTime?(c.info("Seeking pseudo-streamed video within the buffer:".concat(e," of ").concat(n._bufferedTime)),n.video.currentTime=e,n.seekTime=null):i():(n.video.currentTime=e,n.seekTime=null,n.playing||n.play())}}])&&r(n.prototype,i),o&&r(n,o),t}(i.a)},24:function(e,t,n){"use strict";(function(e){var i=new(n(2).a)("MODULE-FACTORY"),a={buildLoadingIndicator:function(t){n.e(13).then(n.bind(null,27)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"LoadingIndicator"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildWatermark:function(t){n.e(20).then(n.bind(null,29)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"Watermark"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildContent:function(t){n.e(17).then(n.bind(null,37)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),n.invalidate(),t.call(null,n),i.debug("Module ready",{module:"Content"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildVolume:function(t){Promise.all([n.e(0),n.e(18)]).then(n.bind(null,22)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"Volume"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildControlBar:function(t){Promise.all([n.e(0),n.e(18)]).then(n.bind(null,30)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"ControlBar"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildPrerollScreen:function(t){n.e(21).then(n.bind(null,31)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"PrerollScreen"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildScrubber:function(t){Promise.all([n.e(0),n.e(23)]).then(n.bind(null,32)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"Scrubber"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildRelatedVideos:function(t,a){n.e(22).then(n.bind(null,33)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(a),t.call(null,n),i.debug("Module ready",{module:"RelatedVideosUI"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildAgeGate:function(t){n.e(3).then(n.bind(null,34)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"AgeGateUI"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildAppearanceManager:function(t){n.e(16).then(n.bind(null,36)).then((function(e){var n=new(0,e.default);n.init(),t.call(null,n),i.debug("Module ready",{module:"AppearanceManager"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))}};t.a=a}).call(this,n(25)(e))},25:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},26:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var i=n(2),a=n(11),o=n(3),r=n(0);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=new i.a("AD-SESSION"),w=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(i=l(t).call(this))||"object"!==d(i)&&"function"!=typeof i?u(n):i,h(u(e),"_startData",null),h(u(e),"_started",!1),h(u(e),"_completed",!1),h(u(e),"_faied",!1),h(u(e),"_aborted",!1),h(u(e),"_adloaded",!1),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(i=[{key:"reset",value:function(){v.info("reset"),this._startData=null,this._started=!1,this._completed=!1,this._failed=!1,this._aborted=!1,this._adloaded=!1}},{key:"getElapsedSecondsSinceStart",value:function(e){try{var t=(e.getTime()-this._startData.start_ts.getTime())/1e3;return parseFloat(t.toFixed(1))}catch(e){return-1}}},{key:"start",value:function(e){v.info("is backfilling? ".concat(e));var t=this;t._started&&v.warn("Previous session is still active"),t._started=!0;var n=window.BoltAdManager;t._startData={timing:n&&n.timing,publisher_id:Object(r.f)()||-1,video_id:window.CurrentVideoConfig.content.videoId||-1,player_width:parseFloat(window.Skin.clientWidth.toFixed(2)),player_height:parseFloat(window.Skin.clientHeight.toFixed(2)),fullscreen:window.PlayerView.fullscreen,start_ts:new Date,cuepoint:n&&n.cuepoint,server_type:n&&n.selectedServer.type,tag_type:n&&n.selectedServer.tagType,backfilling:e},t._dispatchEvent(o.a.Ad.Event.SESSION_START,t._startData)}},{key:"abort",value:function(){var e=this;if(e._started&&!e._aborted){e._aborted=!0,window.BoltAdManager._adSessionCount++;var t=new Date,n={timestamp:t,et_session_start:e.getElapsedSecondsSinceStart(t)};e._dispatchEvent(o.a.Ad.Event.SESSION_ABORT,n),e.reset(),v.info("Abort")}}},{key:"fail",value:function(){var e=this;if(e._started&&!e._failed){e._failed=!0,window.BoltAdManager._adSessionCount++;var t=new Date,n={timestamp:t,et_session_start:e.getElapsedSecondsSinceStart(t)};v.info("Ad Session failed",{data:n}),e._dispatchEvent(o.a.Ad.Event.SESSION_FAIL,n),e.reset(),v.info("Fail")}}},{key:"complete",value:function(){var e=this;if(e._started&&!e._completed){e._completed=!0,window.BoltAdManager._adSessionCount++;var t=new Date,n={timestamp:t,et_session_start:e.getElapsedSecondsSinceStart(t)};e._dispatchEvent(o.a.Ad.Event.SESSION_END,n),e.reset(),v.info("Complete")}}}])&&s(n.prototype,i),a&&s(n,a),t}(a.a)},60:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n(1),o=n(18),r=new i.a("PLAYER-STATE");function d(){this._data={},this._state=null,this._previousState=null,this._waitingStateDelay=null,o.a.mixinEvents(this),this.delayedWaitingState=this.delayedWaitingState.bind(this)}d.prototype={STATE_CHANGED:"stateChanged",AGE_GATE:"age-gate",START:"start",WAITING:"waiting",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",ERROR:"error",RELATED_VIDEOS:"related-videos",delayedWaitingState:function(e){var t=this;clearTimeout(t._waitingStateDelay),t._waitingStateDelay=setTimeout((function(){t.state=d.WAITING}),e)},get previousState(){return this._previousState},get state(){return this._state},set state(e){if(e){e!==this._state&&(clearTimeout(this._waitingStateDelay),e===this.WAITING&&this._state===this.PLAYING||Object(a.d)(window.document.body,"bolt-state-"+this._state),this._previousState=this._state,this._state=e,r.info("Player state:",{state:this._state,prevState:this._previousState}),Object(a.a)(window.document.body,"bolt-state-"+e),this.emit(this.STATE_CHANGED))}},get data(){return this._data},set data(e){this._data=e}};var s=d,l=n(3),u=n(0),c=n(11);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=w(this,y(t).call(this))).data=null,e.autoPaused=!1,e.userDidPause=!1,e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(i=[{key:"update",value:function(e){var t=this,n=!0;t.data&&(n=t.data.top!==e.top||t.data.left!==e.left||t.data.right!==e.right||t.data.bottom!==e.bottom||t.data.percent!==e.percent),n&&(this.data=e,this._dispatchEvent("changed",this.data))}},{key:"requestMetrics",value:function(){var e={type:"zeus_event",name:"requestViewabilityMetrics",id:window.id};window.parent.postMessage(JSON.stringify(e),"*")}}])&&v(n.prototype,i),a&&v(n,a),t}(c.a);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=new i.a("VIEW-EVENT-HANDLER"),_=function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"controller",void 0),p(this,"view",void 0),p(this,"_handleMediaEvents",(function(e){var t=i,n=e.target;e.type===l.a.Media.Event.PLAY?n.isAd()||window.PlayerState.delayedWaitingState(500):e.type===l.a.Media.Event.PLAYING?(window.PlayerState.state=window.PlayerState.PLAYING,window.PlayerSettings.minimumViewability&&(t.controller.viewability.data&&t.controller.viewability.data.percent&&t.controller.viewability.data.percent<window.PlayerSettings.minimumViewability&&t.controller.viewability.userDidPause?g.info("Viewability metrics changed",{msg:"below threshold",action:"defer autoplay",value:{inView:t.controller.viewability.data.percent}}):t.controller.viewability.autoPaused=!1),n.isAd()||void 0===document.visibilityState||"hidden"!==document.visibilityState||t.controller.pause()):e.type===l.a.Media.Event.PAUSED?window.PlayerState.state=window.PlayerState.PAUSED:e.type===l.a.Media.Event.RESUME||(e.type===l.a.Media.Event.ENDED?(window.PlayerState.state=window.PlayerState.ENDED,n.isAd()||t.controller._adEnded()):e.type===l.a.Media.Event.DURATION_CHANGE?(window.PlayerState.data.duration=window.ContentPlayer.duration,!n.isAd()&&window.CurrentVideoConfig.advertising.on?(t.controller._overlayAdCueFinder.reset(!0,window.ContentPlayer.duration),window.BoltAdManager&&window.BoltAdManager.prefetchEnabled&&window.ContentPlayer.duration>=45&&window.BoltAdManager.prefetchAds("overlay")):window.AdBlockDetected&&t.controller._overlayAdCueFinder.reset(!0,window.ContentPlayer.duration)):e.type===l.a.Media.Event.TIME_UPDATE?n.playing&&!n.paused&&(window.PlayerState.state=window.PlayerState.PLAYING,window.PlayerState.data.currentTime=window.ContentPlayer.currentTime,t.controller._onTimeUpdated()):e.type===l.a.Media.Event.LOADED||(e.type===l.a.Media.Event.WAITING?n.isAd()?window.PlayerState.state=window.PlayerState.WAITING:window.PlayerState.delayedWaitingState(500):e.type===l.a.Media.Event.MUTED?(window.PlayerSettings.automute=!0,window.PlayerState.data.muted=window.PlayerSettings.automute):e.type===l.a.Media.Event.UNMUTED?(window.PlayerSettings.automute=!1,window.PlayerState.data.muted=window.PlayerSettings.automute):e.type===l.a.Media.Event.VOLUME_CHANGED?(window.PlayerSettings.volume=e.data,window.PlayerState.data.currentVolume=window.PlayerSettings.volume):e.type===l.a.Media.Event.SEEKED&&window.PlayerState.previousState===window.PlayerState.PAUSED&&(window.PlayerState.state=window.PlayerState.previousState)))})),p(this,"_handleUIEvents",(function(e){var t,n=i,a=n.view.currentPlayer;window.PlayerState;switch(e.type){case l.a.UI.Event.REPLAY:case l.a.UI.Event.PLAYPAUSE:n.controller.togglePlayPause();break;case l.a.UI.Event.TOGGLE_MUTE:if(t=!a.muted,a.mute(t),a.isAd()?window.ContentPlayer.mute(t):window.BoltAdManager&&window.BoltAdManager.videoElement&&(window.BoltAdManager.videoElement.muted=t),!1===t&&0===parseFloat(a.volume)){var o=parseFloat(a.volume.toFixed(2));a.setVolume(o||1)}break;case l.a.UI.Event.CHANGE_VOLUME:a.setVolume(e.data),a.mute(0===e.data);break;case l.a.UI.Event.SEEK:n.controller.seek(e.data);break;case l.a.UI.Event.RELATED_VIDEO_SELECTED:a.autoplay=!0,n.controller.relatedVideosHelper.loadSelectedRelatedVideo(e.data);break;case l.a.UI.Event.AGE_GATE_FAILED:window.PlayerState.state=window.PlayerState.AGE_GATE;break;case l.a.UI.Event.IOS_FULLSCREEN_CHANGED:}}));var a=this;a.view=t,a.controller=n,t.addEventListener(l.a.Media.Event.PLAY,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.PLAYING,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.PAUSED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.RESUME,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.DURATION_CHANGE,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.ENDED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.TIME_UPDATE,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.LOADED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.MUTED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.UNMUTED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.VOLUME_CHANGED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.WAITING,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.SEEKED,a._handleMediaEvents),t.addEventListener(l.a.UI.Event.REPLAY,a._handleUIEvents),t.addEventListener(l.a.UI.Event.PLAYPAUSE,a._handleUIEvents),t.addEventListener(l.a.UI.Event.TOGGLE_MUTE,a._handleUIEvents),t.addEventListener(l.a.UI.Event.CHANGE_VOLUME,a._handleUIEvents),t.addEventListener(l.a.UI.Event.SEEK,a._handleUIEvents),t.addEventListener(l.a.UI.Event.RELATED_VIDEO_SELECTED,a._handleUIEvents),t.addEventListener(l.a.UI.Event.AGE_GATE_FAILED,a._handleUIEvents),t.addEventListener(l.a.UI.Event.IOS_FULLSCREEN_CHANGED,a._handleUIEvents)},b=n(4);function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var P=new i.a("CONTENT-HELPER"),m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controller=t}var t,n,i;return t=e,(n=[{key:"loadVideoWithQuality",value:function(e,t,n,i){var a=window.PlayerView.currentPlayer;if(e!==a.currentQuality||n){var o=a.getSource(),r=Object(u.h)(t,o,e);if(r){var d=r.quality,s=r.source;a.fastSeekEnabled=Object(u.c)(s),P.debug("old src= ",o," new=",s," quality=",d,"autoplay",i,"fast seek enabled",a.fastSeekEnabled),a.autoplay=i,!0===n?(P.debug("loadVideoQuality",{quality:d}),a.currentQuality=d,a.setSource(s),i&&"flash"!==this.type&&(a.preload(),window.PlayerState.delayedWaitingState(500))):(P.debug("loadVideoQuality",{quality:d}),a.setQuality(d,s),window.PlayerState.delayedWaitingState(500)),window.PlayerSettings.defaultHd="hd"===e,window.PlayerView.enableControls(!0)}}else P.debug("secleting the same video")}},{key:"loadNewVideo",value:function(e,t){var n=this;window.CurrentVideoConfig=e;var i=function(){if(window.CurrentVideoConfig.settings=Object(u.r)(window.CurrentVideoConfig.settings,window.PlayerSettings),Object(a.e)(),window.CurrentVideoConfig.advertising.on&&window.CurrentVideoConfig.advertising.cuepoints&&(window.CurrentVideoConfig.advertising.cuepoints=Object(u.w)(window.CurrentVideoConfig.advertising.cuepoints)),window.Playlist)for(var i=0;i<window.Playlist.length;i++)if(window.Playlist[i].videoId===e.content.videoId){window.CurrentPlaylistIndex=i,P.debug("Current playlist index",window.CurrentPlaylistIndex);break}P.info("Load new video",{config:e}),Object(u.u)(e.content.media,(function(i){void 0!==e.content.media.f4m?(P.debug("Processed media",{media:i}),i&&(e.content.media=i)):(e.content.media=i,P.debug("Transformed media",{media:e.content.media})),P.debug("Media data",{media:e.content.media}),window.CurrentVideoConfig.settings.minAge>0?(Object(b.b)(l.a.UI.POSTER),window.PlayerView.addOnceEventListener(l.a.UI.Event.AGE_GATE_PASSED,(function(){t?(P.debug("Age gate",{val:"passed"}),n.controller.play((function(){n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t)}))):(window.PlayerState.state=window.PlayerState.START,P.debug("Age gate",{val:"passed"}),n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t))})),window.PlayerView.addOnceEventListener(l.a.UI.Event.AGE_GATE_FAILED,(function(){window.PlayerState.state=window.PlayerState.AGE_GATE}))):t?(P.info("No age-gate"),window.PlayerState.state=window.PlayerState.START,n.controller.playPrerollAd((function(){n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t)}))):(window.PlayerState.state=window.PlayerState.START,n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t)),window.BoltAdManager&&!window.BoltAdManager.sequentialPrerollAdRequested&&window.PlayerView.currentPlayer.onVideoConfigChanged()}))};window.BoltAdManager&&!window.BoltAdManager.sequentialPrerollAdRequested?window.BoltAdManager.init(i):i()}},{key:"loadNewVideoConfig",value:function(e,t){var n=this;Object(u.o)(e,(function(e){window.videoConfigChanged=!0,n.loadNewVideo(e,t)}),(function(){P.error("Failed to load video config: ".concat(e))}))}}])&&A(t.prototype,n),i&&A(t,i),e}();function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=new i.a("RELATED-VIDEOS-HELPER"),M=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"_relatedVideosFetched",(function(e){var t=n;if(e){var i="string"==typeof e?JSON.parse(e):e;window.RelatedVideos=i,window.RelatedVideos.length>0?(t.playerView.setRelatedVideosFetched(!0),t.playerView.setRelatedVideos(window.RelatedVideos),C.debug("Related videos",window.RelatedVideos)):(t._skipRelatedVideos(),C.debug("No related videos found"))}else t._skipRelatedVideos()})),T(this,"_skipRelatedVideos",(function(){n.playerView.setRelatedVideosFetched(!0),n.playerView.setRelatedVideos(null)})),this.contentHelper=t,this.playerView=window.PlayerView}var t,n,i;return t=e,(n=[{key:"fetch",value:function(){var e=this;window.CurrentVideoConfig.related?e.playerView.isRelatedVideoListFetched()||window.PlayerState.state!==window.PlayerState.PLAYING||(C.info("Fetching related videos"),e.playerView.setRelatedVideosFetched(!0),Object(u.E)({url:window.CurrentVideoConfig.related,method:"get",dataFormat:"json"}).then((function(t){e._relatedVideosFetched(t.data)})).catch(e._skipRelatedVideos)):(e._skipRelatedVideos(),C.debug("No related videos"))}},{key:"shouldAttemptPrefetch",value:function(){this.playerView=window.PlayerView;var e=this.playerView.currentPlayer;if(!window.CurrentVideoConfig.related)return!1;var t=!this.playerView.isRelatedVideoListFetched()&&0!==e.duration&&e.currentTime>e.duration-l.a.UI.RELATED_FETCH_TIME_BEFORE_VID_ENDS;return C.debug("Should attempt prefetching related videos",{value:!!t}),t}},{key:"showRelatedVideosMenu",value:function(){return!!this.playerView.isRelatedVideoListFetched()&&(Array.isArray(window.RelatedVideos)&&window.RelatedVideos.length>0?(C.debug("Show related videos"),this.playerView.showRelatedVideosMenu(),window.PlayerState.state=window.PlayerState.RELATED_VIDEOS):(C.debug("No related videos"),window.PlayerState.state=window.PlayerState.START),!0)}},{key:"loadSelectedRelatedVideo",value:function(e){var t;this.playerView.setRelatedVideosFetched(!1),window.PlayerState.delayedWaitingState(500);for(var n=0;n<window.RelatedVideos.length&&(t=window.RelatedVideos[n]).videoId!==e;n++);C.debug("Related video to load",{videoId:t.videoId}),this.contentHelper.loadNewVideoConfig(t.config,!0)}}])&&S(t.prototype,n),i&&S(t,i),e}();function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var L=new i.a("FRAME-PLAYLIST-HELPER"),I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentHelper=t}var t,n,i;return t=e,(n=[{key:"processPlaylist",value:function(){var e=window.Playlist;if(window.CurrentPlaylistIndex<e.length-1){var t=e[++window.CurrentPlaylistIndex],n=!!window.PlayerSettings.playlistPlaythrough;L.info("Process playlist, player settings:",window.PlayerSettings),this.loadPlaylistVideo(t,n)}else window.PlayerState.state=window.PlayerState.ENDED}},{key:"loadPlaylistVideo",value:function(e,t){var n;window.PlayerState.delayedWaitingState(500),L.debug("Load playlist video",e),window.PlayerView.enableControls(!1),window.BoltAdManager&&window.BoltAdManager.abort(),(null===(n=window.BoltAdManager)||void 0===n?void 0:n.sequentialPrerollAdRequested)||window.ContentPlayer.unload(),this.contentHelper.loadNewVideoConfig(e.config,t)}}])&&O(t.prototype,n),i&&O(t,i),e}();function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var V=new i.a("OVERLAY-AD-CUE-FINDER"),D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nextVideoAdCuepoint=0,this.lastVideoAdCuepoint=0,this.skip=!1,this._lastAttempt=0,this._videoDuration=0}var t,n,i;return t=e,(n=[{key:"hasCueForTime",value:function(e,t,n){var i=this,a=i.videoDuration>this.MIN_DURATION&&t>=this.MIN_WIDTH&&n>=this.MIN_HEIGHT,o=Math.floor(e);return a&&(a=i.videoDuration-o>this.MIN_DURATION)&&(a=o-i.lastVideoAdCuepoint>=15)&&i.lastAttempt>0&&(a=o-i.lastAttempt>=i.AD_INTERVAL),a&&i.nextVideoAdCuepoint>0&&(a=i.nextVideoAdCuepoint-o>=this.MIN_DURATION),a&&(i._lastAttempt=o),a}},{key:"reset",value:function(e,t){t||V.error("Null video duration"),this._videoDuration=t,this.lastVideoAdCuepoint=0,this.nextVideoAdCuepoint=0,e&&(this.skip=!1,this.lastAttempt=0)}},{key:"lastAttempt",get:function(){return this._lastAttempt},set:function(e){this._lastAttempt=Math.floor(e)}},{key:"videoDuration",get:function(){return this._videoDuration}},{key:"MIN_WIDTH",get:function(){return 327}},{key:"MIN_HEIGHT",get:function(){return 340}},{key:"AD_INTERVAL",get:function(){return 420}},{key:"MIN_DURATION",get:function(){return 45}}])&&k(t.prototype,n),i&&k(t,i),e}(),R=new i.a("FRAME-AD-HELPER");function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=new i.a("CONTROLLER"),G=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),B(this,"viewEventHandler",void 0),B(this,"contentHelper",void 0),B(this,"relatedVideosHelper",void 0),B(this,"playlistHelper",void 0),B(this,"_overlayAdCueFinder",void 0),B(this,"_shouldRequestPreroll",(function(e){var n=e.contentPlayer,i=void 0===n?window.ContentPlayer:n,a=e.adMgr,o=void 0===a?window.BoltAdManager:a;return!window.DebugMode.noPreroll&&o&&t._prerollEnabled&&window.CurrentVideoConfig.advertising.on&&(i.videoPlayCount-1)%i.videoAdRatio==0})),B(this,"_onViewabilityMetricsChanged",(function(e){var n=t,i=e.data,a=window.PlayerSettings.minimumViewability;window.PlayerView.currentPlayer&&a&&(i.percent<a?window.PlayerState.state===window.PlayerState.PLAYING&&n.viewability.userDidPause&&U.info("Viewability metrics changed",{msg:"below threshold",action:"pause"}):window.PlayerState.state===window.PlayerState.PAUSED&&n.viewability.autoPaused?(U.info("Viewability metrics changed",{msg:"above threshold",action:"resume"}),n.resume()):window.PlayerState.state===window.PlayerState.START&&n.autoplayWhenViewabilityMetricsChanged&&(U.info("Viewability metrics changed",{msg:"above threshold",action:"autoplay"}),n.autoplayWhenViewabilityMetricsChanged=!1,n.playPrerollAd()))})),this.currentVideoConfig=window.CurrentVideoConfig,this.replay=this.replay.bind(this),this.viewability=new E,this.contentHelper=new m(this),this.relatedVideosHelper=new M(this.contentHelper),this.playlistHelper=new I(this.contentHelper),this._overlayAdCueFinder=new D}var t,i,o;return t=e,(i=[{key:"_doStartUp",value:function(){var e=this;if(window.BoltAdManager){window.BoltAdManager.addEventListener(l.a.Ad.Event.VMAP_CUEPOINTS_CHANGED,(function(t){e.currentVideoConfig.advertising.cuepoints||(e.currentVideoConfig.advertising.cuepoints=[]),e.currentVideoConfig.advertising.cuepoints=e.currentVideoConfig.advertising.cuepoints.concat(t.data),e.currentVideoConfig.advertising.cuepoints=Object(u.w)(Object(u.j)(e.currentVideoConfig.advertising.cuepoints)),window.ContentPlayer&&(window.ContentPlayer.adsCuepoints=e.currentVideoConfig.advertising.cuepoints.concat())}));var t=e.currentVideoConfig.advertising.prefetch;window.DebugMode.forcePrefetch&&!window.DebugMode.noPreroll?t=!0:window.DebugMode.forceNoPrefetch&&(t=!1),window.BoltAdManager.prefetchEnabled=t}window.ContentPlayer.pseudoAdsCuepoints=[],window.ContentPlayer.videoAdRatio=void 0!==e.currentVideoConfig.advertising.videoAdRatio?e.currentVideoConfig.advertising.videoAdRatio:1,window.ContentPlayer.videoPlayCount=1,e.viewEventHandler=new _(window.PlayerView,this),window.readyCallback.call(null,window.ContentPlayer.containerId);var i=function(){if(window.PlayerSettings.autoplay)if(window.PlayerSettings.minimumViewability){var t=window.PlayerSettings.minimumViewability;e.viewability.addOnceEventListener("changed",(function(n){var i=n.data;i.percent>=t?(U.info("Viewability metrics changed",{msg:"above threshold",action:"play",value:{inView:i.percent,threshold:t}}),window.BoltAdManager?"requesting"!==window.BoltAdManager.status&&e.playPrerollAd():e.play()):(U.info("Viewability metrics changed",{msg:"below threshold",action:"Defer autoplay",value:{inView:i.percent,threshold:t}}),window.PlayerState.state=window.PlayerState.START),e.autoplayWhenViewabilityMetricsChanged=!0,e.viewability.addEventListener("changed",e._onViewabilityMetricsChanged)})),e.viewability.requestMetrics()}else e.playPrerollAd();else window.PlayerState.state=window.PlayerState.START,window.PlayerSettings.minimumViewability&&(e.viewability.requestMetrics(),e.viewability.addEventListener("changed",e._onViewabilityMetricsChanged))},a=function(){!window.DebugMode.noPreroll&&window.BoltAdManager&&window.BoltAdManager.prefetchEnabled?(U.debug("Prefetch preroll ad"),window.PlayerState.state=window.PlayerState.WAITING,window.BoltAdManager.prefetchAds("preroll",i)):i()};window.client.hasFlash?n.e(7).then(n.bind(null,47)).then((function(e){var t=e.default;window.Cors=new t(a)})):a()}},{key:"replay",value:function(){var e=window.PlayerView.currentPlayer;e.isAd()||(U.info("Replay content",{title:window.CurrentVideoConfig.settings.title}),e.replay(),e.videoPlayCount++,this._overlayAdCueFinder.reset(!1,e.duration))}},{key:"_shouldPrefetchNextPreroll",value:function(e){var t=e.currentPlayer,n=void 0===t?window.PlayerView.currentPlayer:t,i=e.adMgr,a=void 0===i?window.BoltAdManager:i,o=e.adMgrStatus;return!o&&window.BoltAdManager&&window.BoltAdManager.status&&(o=window.BoltAdManager.status),!!window.PlayerSettings.playlistPlaythrough&&!n.isAd()&&!a.sequentialPrerollAdRequested&&"prefetching"!==o&&"requesting"!==o&&"media_located"!==o&&window.Zeus.sessionVideoPlayCount>1&&n.currentTime>=n.duration-l.a.Ad.AD_PREFETCH_TIME_BEFORE_VID_ENDS}},{key:"_onTimeUpdated",value:function(){var e=this,t=window.PlayerView.currentPlayer,n=window.BoltAdManager;if(window.PlayerState.state=window.PlayerState.PLAYING,!t.isAd()){var i,a=t.currentTime,o=null,r=null,d=!1;if(n&&n.hasVMAPBreak(a))return U.info("AdManager has a VMAP break at ".concat(a)),void e._playMidrollAd(window.parseInt(a,10));if(t.adsCuepoints&&t.adsCuepoints.length>0?(r=t.adsCuepoints,d=!1):t.pseudoAdsCuepoints&&t.pseudoAdsCuepoints.length>0&&(r=t.pseudoAdsCuepoints,d=!0),!window.DebugMode.noMidroll&&r){for(var s=0;s<r.length;s++)if(r[s]<t.currentTime){o=r.shift(),d||t.hitAdCuepoint(o);break}o&&(e._currentCuepoint=o,e._overlayAdCueFinder.lastVideoAdCuepoint=o,e._overlayAdCueFinder.nextVideoAdCuepoint=r[0],U.info("Event CB",{evt:"_onTimeUpdated",value:t.currentTime,data:{cue:o}}),e._playMidrollAd())}t.currentTime>=t.duration-l.a.UI.RELATED_FETCH_TIME_BEFORE_VID_ENDS&&e.relatedVideosHelper.shouldAttemptPrefetch()&&e.relatedVideosHelper.fetch({}),n&&(i=n.status,e._shouldPrefetchNextPreroll({currentPlayer:t,adMgr:n,adMgrStatus:i})&&(n.sequentialPrerollAdRequested=!0,n.previousStatus=i,n.status="prefetching",e.playPrerollAd(),U.debug("Prefetch Subsequent videos' preroll ads ".concat(l.a.Ad.AD_PREFETCH_TIME_BEFORE_VID_ENDS," before video ends"))))}}},{key:"seek",value:function(e){var t=window.PlayerView.currentPlayer;if(!t.isAd()){var n=e;if(window.PlayerState.state=window.PlayerState.WAITING,!window.DebugMode.noMidroll&&window.CurrentVideoConfig.advertising.on){var i=t.adsCuepoints;if(i.length>0)for(var a=0;a<i.length;a++){var o=i[a];if(o<e){n=o;break}}}t.seek(n)}}},{key:"_requestAd",value:function(e,t,n,i){!function(e,t){var n,i=t.timing,o=t.loadedCallback,r=t.finishedCallback,d=t.vmapBreakTime,s=function(){window.BoltAdManager.removeEventListener(l.a.Media.Event.LOADED,h),window.BoltAdManager.removeEventListener(l.a.Media.Event.ENDED,v),window.BoltAdManager.removeEventListener(l.a.Ad.Event.FAILED,w),window.BoltAdManager.removeEventListener(l.a.Ad.Event.ABORTED,y),window.BoltAdManager.removeEventListener(l.a.Ad.Event.TAG_NOT_AVAILABLE,c)},c=function(){s(),r()},h=function e(){window.BoltAdManager.removeEventListener(l.a.Media.Event.LOADED,e),R.debug("requestAd hit the ad loaded listener for a ".concat(i)),Object(a.a)(window.Skin,"bolt-ad-type-".concat(window.BoltAdManager.type));var t=null;window.BoltAdManager.type===l.a.Ad.Type.VAST||window.BoltAdManager.type===l.a.Ad.Type.FLASH_VPAID?t=window.BoltAdManager.adPlayer.adPlayer:window.BoltAdManager.type===l.a.Ad.Type.GOOGLE||window.BoltAdManager.type===l.a.Ad.Type.GOOGLE_DCM_VPAID?(R.debug("GOOGLE AD LOADED"),t=window.BoltAdManager.adPlayer):t=window.BoltAdManager.adPlayer,R.debug("got a linear ad",i),"preroll"!==i&&"midroll"!==i||(window.client.system.ios&&window.PlayerView.fullscreen&&window.ContentPlayer.addOnceEventListener(l.a.Media.Event.PAUSED,(function(){R.debug("Exiting fullscreen"),window.ContentPlayer.video.webkitExitFullscreen()})),R.debug("About to pause the content player so ad can play"),window.ContentPlayer.pause()),window.PlayerView.setCurrentPlayer(t),window.BoltAdManager.type!==l.a.Ad.Type.GOOGLE_DCM_VPAID&&window.BoltAdManager.type!==l.a.Ad.Type.GOOGLE&&t.type!==l.a.Ad.Type.FLASH_VPAID&&t.type!==l.a.Ad.Type.JS_VPAID&&t.play(),Object(b.b)(l.a.UI.LOADING_INDICATOR),o()},v=function(){window.AdSession.complete(),R.debug("hit the ad completed listener for a ".concat(i)),s(),Object(b.b)(l.a.UI.LOADING_INDICATOR),window.BoltAdManager.VMAPBreaksForCurrentAdTiming&&window.BoltAdManager.VMAPBreaksForCurrentAdTiming.length>0||this._adPlays<window.prerollAdAmt?e._requestAd(i,o,r,d):(Object(a.d)(window.Skin,"bolt-ad-type-".concat(window.BoltAdManager.type)),window.BoltAdManager.remove(),"precontent"===window.PlayerSettings.playerType?e._showHiddenContainer(window.ContentPlayer):(window.PlayerView.setCurrentPlayer(window.ContentPlayer),r()))},w=function(){if(window.AdSession.fail(),R.debug("hit the ad failed listener for a ".concat(i)),s(),window.BoltAdManager.remove(),window.PlayerView._dispatchEvent(l.a.Ad.Event.FAILED,{timing:i}),"precontent"===window.PlayerSettings.playerType){var t=window.tycheData;Object(u.t)(t,"features","interstitial","on")&&t.features.interstitial.on?window.setTimeout((function(){e._showHiddenContainer(window.ContentPlayer)}),5e3):e._showHiddenContainer(window.ContentPlayer)}else window.PlayerView.setCurrentPlayer(window.ContentPlayer),Object(b.b)(l.a.UI.LOADING_INDICATOR),r()},y=function(){window.AdSession.abort(),R.warn("Ad aborted"),Object(a.d)(window.Skin,"bolt-ad-type-".concat(window.BoltAdManager.type)),s(),window.PlayerView.setCurrentPlayer(window.ContentPlayer)};"midroll"===i||window.BoltAdManager.sequentialPrerollAdRequested||(window.PlayerState.state=window.PlayerState.WAITING),n=e._currentCuepoint?e._currentCuepoint:"preroll"===i?-1:99999999999,"midroll"===i&&d&&(n=d);var f=function(){window.BoltAdManager.requestAd(i,n,(function(){Object(b.f)(l.a.UI.AD_CONTAINER,"block","hidden"),window.BoltAdManager.addEventListener(l.a.Media.Event.LOADED,h),window.BoltAdManager.addEventListener(l.a.Media.Event.ENDED,v),window.BoltAdManager.addEventListener(l.a.Ad.Event.FAILED,w),window.BoltAdManager.addEventListener(l.a.Ad.Event.ABORTED,y),window.BoltAdManager.addEventListener(l.a.Ad.Event.TAG_NOT_AVAILABLE,c)}))};window.shouldSupportGDPR&&void 0===window.gdpr?(R.info("[_requestAd] querying GDPR"),window.MessageChannel.sendRequest("gdpr",(function(e){R.info("[_requestAd] received GDPR value:",e),window.gdpr=e,f()}))):f()}(this,{timing:e,loadedCallback:t,finishedCallback:n,vmapBreakTime:i})}},{key:"playPrerollAd",value:function(e,t){var n=this,i=window.ContentPlayer,a=window.BoltAdManager;if(window.CurrentVideoConfig.advertising.on||window.postLogMessage("Advertising is disabled for the current video","warn"),window.AdBlockDetected&&(window.AdBlocked.track("preroll"),a||n.play()),n._shouldRequestPreroll({contentPlayer:i,adMgr:a})){U.info("Preroll",{func:"playPrerollAd",action:"request"});var o=function(){},r=function(){if(a=window.BoltAdManager,U.info("Preroll",{func:"finishedCallback",action:"adComplete"}),window.PlayerSettings.adLoop)return U.info("Preroll",{func:"finishedCallback",action:"adLoop"}),void d();if(a.prefetchEnabled){var t=window.CurrentVideoConfig.advertising.cuepoints||[];!window.DebugMode.noMidroll&&t.length>0&&a.prefetchAds("midroll")}window.client.isMobile?setTimeout((function(){"function"==typeof e?e():n.play()}),500):"function"==typeof e?e():a&&"prefetching"!==a.status&&n.play()},d=function(){n._requestAd("preroll",o,r)};if(a.prefetchEnabled&&!t)U.info("Preroll",{func:"playPrerollAd",action:"prefetch"}),window.PlayerState.state=window.PlayerState.WAITING,a.prefetchAds("preroll",d);else{var s=!!window.DebugMode.delayedPreroll;Object(u.t)(a.selectedServer,"siteTags","delayedPreroll")&&(s=a.selectedServer.siteTags.delayedPreroll||window.DebugMode.delayedPreroll),s&&"precontent"!==window.PlayerSettings.playerType&&(U.info("Preroll",{func:"playPrerollAd",action:"delayedPreroll"}),n.play()),d()}}else window.client.isMobile?setTimeout((function(){"function"==typeof e?e():n.play()}),500):"function"==typeof e?e():n.play()}},{key:"_shouldRequestMidroll",value:function(e){var t=e.contentPlayer,n=void 0===t?window.ContentPlayer:t,i=e.adMgr,a=void 0===i?window.BoltAdManager:i;return!window.DebugMode.noMidroll&&a&&window.CurrentVideoConfig.advertising.on&&(n.videoPlayCount-1)%n.videoAdRatio==0}},{key:"_playMidrollAd",value:function(e){var t=this,n=window.ContentPlayer,i=window.BoltAdManager;window.AdBlockDetected&&window.AdBlocked.track("midroll"),t._shouldRequestMidroll({contentPlayer:n,adMgr:i})&&t._requestAd("midroll",(function(){}),(function(){U.info("Midroll",{func:"finishedCallback",action:"adComplete"}),(window.CurrentVideoConfig.advertising.cuepoints||[]).length>0&&(i=window.BoltAdManager).prefetchEnabled&&(U.info("Midroll",{func:"finishedCallback",action:"refillAdPool"}),i.prefetchAds("midroll",null,!0),(n=window.ContentPlayer).duration>45e3&&(U.info("Midroll",{func:"finishedCallback",action:"refillOverlayPool"}),i.prefetchAds("overlay",null,!0))),t.resume()}),e)}},{key:"_adEnded",value:function(){var e=this;U.info("AdEnded",{func:"_adEnded",videoPlayCount:window.ContentPlayer.videoPlayCount}),window.PlayerState.state=window.PlayerState.WAITING,window.BoltAdManager&&!window.BoltAdManager.sequentialPrerollAdRequested&&window.CurrentVideoConfig.advertising.on&&(window.ContentPlayer.videoPlayCount-1)%window.ContentPlayer.videoAdRatio==0?window.Playlist&&window.CurrentPlaylistIndex!==window.Playlist.length-1?e.playlistHelper.processPlaylist():(window.PlayerState.state=window.PlayerState.WAITING,function(){U.info("AdEnded",{func:"finishedCallback",action:"adComplete"});var t=!1;if(window.Playlist)e.playlistHelper.processPlaylist();else if(window.ContentPlayer.loop?t=!0:(window.client.system.ios&&window.PlayerView.fullscreen&&window.ContentPlayer.video.webkitExitFullscreen(),window.ContentPlayer.show(!1)),t)var n=setTimeout((function(){clearTimeout(n),U.info("AdEnded",{func:"finishedCallback",action:"replay"}),e.playPrerollAd()}),100);else window.CurrentVideoConfig.related?(window.PlayerState.state=window.PlayerState.WAITING,e.relatedVideosHelper.showRelatedVideosMenu()):window.PlayerState.state=window.PlayerState.START}()):window.Playlist?e.playlistHelper.processPlaylist():window.ContentPlayer.loop?e.play():window.CurrentVideoConfig.related?(window.PlayerState.state=window.PlayerState.WAITING,e.relatedVideosHelper.showRelatedVideosMenu()):window.PlayerState.state=window.PlayerState.START}},{key:"_showHiddenContainer",value:function(){var e=window.PlayerSettings.hiddenContainer||window.PlayerSettings.postAdContainer;e&&(U.info("Showing post content container",{hcId:e}),window.Zeus.dispatchEvent("showHiddenContainer",{hcId:e}))}},{key:"_setSize",value:function(e,t,n){window.PlayerView.size(t,n)}},{key:"play",value:function(){var e=window.PlayerView.currentPlayer;e&&(e.hasStarted&&e.paused?this.resume():e.ended?this.replay(e):(window.PlayerState.delayedWaitingState(500),"native"!==e.type&&"hls_xt"!==e.type||e.preload(),e.hlsLoading||e.play(),e.videoPlayCount++,window.Zeus.sessionVideoPlayCount++))}},{key:"pause",value:function(e){var t=this,n=window.PlayerView.currentPlayer;!n||n.isAd()&&!n.spotxScriptUrl||(window.PlayerState.state=window.PlayerState.PAUSED,n.pause(),t.viewability.autoPaused=e,t.viewability.userDidPause||e||(t.viewability.userDidPause=!0))}},{key:"togglePlayPause",value:function(){var e=this;window.client.isMobile&&window.BoltAdManager&&!window.BoltAdManager.hasBeenTouched&&(window.BoltAdManager.videoElement&&(window.BoltAdManager.videoElement.src="",window.BoltAdManager.videoElement.load()),window.BoltAdManager.hasBeenTouched=!0);var t=window.PlayerView.currentPlayer;if(t){if(window.client.isMobile&&!t.hasBeenTouched)try{t.touch()}catch(e){U.warn("Caught Error",{message:e.message,stack:e.stack})}t.hasStarted?t.paused?e.resume():e.pause():t.isAd()?e.play():e.playPrerollAd()}}},{key:"resume",value:function(){window.PlayerView.currentPlayer&&(window.PlayerState.state=window.PlayerState.PLAYING,window.PlayerView.currentPlayer.resume())}},{key:"stop",value:function(){window.PlayerView.currentPlayer&&!window.PlayerView.currentPlayer.isAd()&&window.PlayerView.currentPlayer.stop()}},{key:"setVolume",value:function(e){window.PlayerView.currentPlayer&&window.PlayerView.currentPlayer.setVolume(e)}},{key:"mute",value:function(e){window.PlayerView.currentPlayer&&window.PlayerView.currentPlayer.mute(e)}},{key:"updateViewabilityMetrics",value:function(e){this.viewability.update(e)}},{key:"_onVisibilityChange",value:function(){var e=this,t=window.PlayerView,n=window.PlayerState,i=t.currentPlayer;U.info("Visibility State",{visibilityState:document.visibilityState,playerState:n.state,isAd:i.isAd()}),i.isAd()||n.state===n.START||("hidden"===document.visibilityState?e.paused||e.pause():n.state===n.PAUSED&&n.previousState===n.PLAYING?e.play():n.state===n.PAUSED&&e.pause())}},{key:"startUp",value:function(){var e=this,t=window.pageViews;window.BENCHMARK.end("bolt_coreJSLoaded_to_controllerStartUp");var n,i=window.PlayerSettings.skips||0;if(e._prerollEnabled=t>i,e._prerollEnabled||window.postLogMessage("Preroll is disabled because the video has been viewed more than ".concat(i," times"),"warn"),window.PlayerSettings.pageviewForAds){n=window.PlayerSettings.pageviewForAds.split(",");for(var a=0;a<n.length;a++)n[a]=parseInt(n[a],10);e._prerollEnabled=n.indexOf(t)>-1}U.info("Preroll",{func:"startUp",data:{enabled:e._prerollEnabled,viewsForAds:n,pageViews:t,pageViewsToSkip:i}}),e._prerollEnabled||"precontent"!==window.PlayerSettings.playerType?(void 0!==document.visibilityState&&document.addEventListener("visibilitychange",(function(){e._onVisibilityChange()}),!1),window.PlayerView.addEventListener(l.a.Player.Event.VIEW_READY,(function(){window.client.showHideIframe&&window.Zeus.dispatchEvent("showiframe"),window.CurrentVideoConfig.settings.minAge>0?(window.PlayerState.state=window.PlayerState.AGE_GATE,window.PlayerView.addOnceEventListener(l.a.UI.Event.AGE_GATE_PASSED,(function(){U.info("Age gate passed"),e._doStartUp()}))):e._doStartUp()})),!0===window.PlayerSettings.adOnly?window.PlayerView.init(!1):window.PlayerView.init(window.CurrentVideoConfig.settings.minAge>0)):e._showHiddenContainer()}}])&&N(t.prototype,i),o&&N(t,o),e}(),F=n(24);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q,Y=new i.a("VIEW"),z=window.BENCHMARK,J=function(e){function t(e){var n,i,a,o,r,d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,a=x(t).call(this),n=!a||"object"!==H(a)&&"function"!=typeof a?q(i):a,o=q(n),d=420,(r="TINY_PLAYER_MAX_WIDTH")in o?Object.defineProperty(o,r,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[r]=d;var s=q(n);return n._handleIOSFullscreenEvents=n._handleIOSFullscreenEvents.bind(q(n)),n.cssClass=e,n._isReady=!1,n.mouseInput=null,n._volumeControl=null,n._relatedVideoMenu=null,n._content=null,n._prerollScreen=null,n._uiModules=[],n._ageGateHandler=null,n._watermark=null,n._coreModules=["_controlbar","_scrubber"],window.client.isMobile||(n._coreModules.push("_volumeControl"),n._coreModules.push("mouseInput")),n._defaultBoxModel=null,n.fullscreen=!1,n.currentPlayer=null,n._enableAgeGate=!1,window.addEventListener("resize",(function(){window.PlayerSettings.tinyPlayer=!1,window.innerWidth<=n.TINY_PLAYER_MAX_WIDTH&&(window.PlayerSettings.tinyPlayer=!0);var e=setTimeout((function(){clearTimeout(e),s.invalidate()}),400)})),n.fixedControlbar=!1,n.fixedTitlebar=!1,n.fixedScrubber=!1,n.fixedBottomBar=!1,n}var i,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),i=t,(o=[{key:"enableAgeGate",value:function(e){var t=this;window.PlayerSettings.preview&&(e?t.currentPlayer&&t.currentPlayer.playing&&t.currentPlayer.pause():window.PlayerState.state=window.PlayerState.START),e?t._ageGateHandler?(t._ageGateHandler.invalidate(),t._ageGateHandler.invalidateCookie()):F.a.buildAgeGate((function(e){t._ageGateHandler=e,t._ageGateHandler.addEventListener(l.a.UI.Event.AGE_GATE_PASSED,(function(e){Y.debug("Age gate",{passed:!0}),t._dispatchEvent(e.type,e.data)})),t._ageGateHandler.addEventListener(l.a.UI.Event.AGE_GATE_FAILED,(function(e){Y.debug("Age gate",{passed:!1}),t._dispatchEvent(e.type)})),t._ageGateHandler.invalidate(),t._ageGateHandler.invalidateCookie(),t._uiModules.push(t._ageGateHandler)})):(t._ageGateHandler?t._ageGateHandler.close():Object(b.b)(l.a.UI.AGE_GATE_LAYER),t._dispatchEvent(l.a.UI.Event.AGE_GATE_PASSED))}},{key:"showRelatedVideosMenu",value:function(){null!==this._relatedVideoMenu&&this._relatedVideoMenu.open()}},{key:"setRelatedVideos",value:function(e){var t=this;e?t._relatedVideoMenu?t._relatedVideoMenu.init(e):F.a.buildRelatedVideos((function(e){t._relatedVideoMenu=e,t._relatedVideoMenu.addEventListener(l.a.UI.Event.RELATED_VIDEO_SELECTED,(function(e){t._dispatchEvent(e.type,e.data)})),t._uiModules.push(t._relatedVideoMenu)}),e):t._relatedVideoMenu&&t._relatedVideoMenu.close()}},{key:"setRelatedVideosFetched",value:function(e){this._relatedVideosFetched=e}},{key:"isRelatedVideoListFetched",value:function(){return this._relatedVideosFetched}},{key:"enableControls",value:function(){}},{key:"toggleFullscreen",value:function(){Y.debug("Toggle Fullscreen",{current:this.fullscreen}),this.setFullscreen(!this.fullscreen)}},{key:"setFullscreen",value:function(e){Y.info("Set Fullscreen",{value:!!e});var t=this;if(!1!==window.PlayerSettings.fullscreen)if(this.fullscreenRequested=e,window.client.system.ios){if(!t.currentPlayer)return;!1===e?t.currentPlayer.video.webkitExitFullscreen():t.currentPlayer.video.webkitEnterFullscreen()}else window.fullscreenEnabled&&(!1===e?window.exitFullscreen():window.enterFullscreen()),t._dispatchEvent(l.a.UI.Event.REQUEST_FULLSCREEN_CHANGE,!t.fullscreen);else Y.warn("Fullscreen is not allowed by the publisher")}},{key:"_handleIOSFullscreenEvents",value:function(e){Y.debug("IOS Fullscreen Event",{type:e.type,data:e.data}),"webkitendfullscreen"===e.type?this.fullscreen=!1:(this.fullscreen=!0,this.fullscreenRequested=!1),this._dispatchEvent(l.a.UI.Event.IOS_FULLSCREEN_CHANGED,this.fullscreen)}},{key:"setCurrentPlayer",value:function(e){var t=l.a.UI,n=this;if(e!==n.currentPlayer){n.currentPlayer&&(n.currentPlayer.removeEventListener(l.a.Player.Event.CANPLAY,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Player.Event.CONTENT_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Player.Event.QUALITY_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Player.Event.CONFIG_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.PLAY,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.PLAYING,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.DURATION_CHANGE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.ENDED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.PAUSED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.RESUME,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.STOPPED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.TIME_UPDATE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.LOAD_PROGRESS,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.WAITING,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.LOAD_START,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.LOADED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.START_TIME_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.NOT_FOUND,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.FIRSTQUARTILE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.MIDPOINT,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.THIRDQUARTILE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.MUTED,n._onMuted),n.currentPlayer.removeEventListener(l.a.Media.Event.UNMUTED,n._onUnmuted),n.currentPlayer.removeEventListener(l.a.Media.Event.VOLUME_CHANGED,n._onVolumeChanged),n.currentPlayer.removeEventListener(l.a.Media.Event.SEEKED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Ad.Event.CUEPOINT,n._handlePlayerEvents),window.client.system.ios&&n.currentPlayer.video&&(n.currentPlayer.video.removeEventListener("webkitendfullscreen",n._handleIOSFullscreenEvents),n.currentPlayer.video.removeEventListener("webkitbeginfullscreen",n._handleIOSFullscreenEvents))),n._handlePlayerEvents=n._handlePlayerEvents.bind(this),e.addEventListener(l.a.Player.Event.CANPLAY,n._handlePlayerEvents),e.addEventListener(l.a.Player.Event.CONTENT_CHANGED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.PLAY,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.PLAYING,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.DURATION_CHANGE,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.ENDED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.PAUSED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.RESUME,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.STOPPED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.TIME_UPDATE,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.LOAD_PROGRESS,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.WAITING,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.LOAD_START,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.LOADED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.FIRSTQUARTILE,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.MIDPOINT,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.THIRDQUARTILE,n._handlePlayerEvents),n._onMuted=n._onMuted.bind(this),e.addEventListener(l.a.Media.Event.MUTED,n._onMuted),n._onUnmuted=n._onUnmuted.bind(this),e.addEventListener(l.a.Media.Event.UNMUTED,n._onUnmuted),n._onVolumeChanged=n._onVolumeChanged.bind(this),e.addEventListener(l.a.Media.Event.VOLUME_CHANGED,n._onVolumeChanged),e.addEventListener(l.a.Media.Event.SEEKED,n._handlePlayerEvents);var i=window.BoltAdManager;e.isAd()?(Object(a.a)(document.body,"bolt-linear-ad-on"),Object(a.d)(document.body,"bolt-content-on"),Object(b.b)(t.TITLE_BAR),Object(b.b)(t.SUBTITLE_TEXT),window.client.isMobile||n._volumeControl&&n._volumeControl.setPlayer(e),n.fixedControlbar=i.type===l.a.Ad.Type.FLASH_VPAID):window.PlayerSettings.adOnly||(Object(a.a)(document.body,"bolt-content-on"),Object(a.d)(document.body,"bolt-linear-ad-on"),e.addEventListener(l.a.Ad.Event.CUEPOINT,n._handlePlayerEvents),e.addEventListener(l.a.Player.Event.QUALITY_CHANGED,n._handlePlayerEvents),e.addEventListener(l.a.Player.Event.CONFIG_CHANGED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.NOT_FOUND,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.START_TIME_CHANGED,n._handlePlayerEvents),Object(b.b)(t.AD_CONTAINER),window.client.isMobile||n._volumeControl&&n._volumeControl.setPlayer(e),n.fixedControlbar=!1===window.PlayerSettings.appearance.controlbar.autohide),window.client.isMobile?e.mute(window.PlayerSettings.automute):(window.PlayerSettings.automute?e.setVolume(0):e.setVolume(window.PlayerSettings.volume||1),e.mute(window.PlayerSettings.automute)),n.currentPlayer=e,window.client.system.ios&&n.currentPlayer.video&&(n.currentPlayer.video.addEventListener("webkitendfullscreen",n._handleIOSFullscreenEvents),n.currentPlayer.video.addEventListener("webkitbeginfullscreen",n._handleIOSFullscreenEvents)),n._isReady?(n._dispatchEvent(l.a.UI.Event.PLAYER_CHANGED),n.invalidate()):n._waitForCoreModules()}else Y.debug("Attempting to set new player failed; not a new player.")}},{key:"_waitForCoreModules",value:function(){var e=this;Y.debug("Core Modules",e._coreModules),Q||(Q=setInterval((function(){if(e._coreModules.every((function(t){return Y.debug("Waiting for module...",t),!!e[t]}))){clearInterval(Q),e._isReady=!0,Y.debug("View is ready"),window.Skin.style.visibility="visible",e.appearanceManager.updateColors(),e.appearanceManager.updateTextColors();for(var t=0;t<e._uiModules.length;t++)e._uiModules[t].updateAppearance();e._dispatchEvent(l.a.UI.Event.PLAYER_CHANGED),e.invalidate(),e._dispatchEvent(l.a.Player.Event.VIEW_READY),e.enableAgeGate(e._enableAgeGate)}}),100))}},{key:"_handlePlayerEvents",value:function(e){var t=this,n=e.target,i=l.a.UI;if(e.type===l.a.Player.Event.CONFIG_CHANGED){var o=window.CurrentVideoConfig;Y.info("Player config changed",{data:{config:o,newConfig:n.config}}),o.settings.minAge>0?t.enableAgeGate(!0):t.enableAgeGate(!1),Object.keys(o.content.media).length>1?(Object(a.d)(window.Skin,"bolt-hd-disabled"),Object(a.a)(window.Skin,"bolt-hd-enabled")):(Object(a.d)(window.Skin,"bolt-hd-enabled"),Object(a.a)(window.Skin,"bolt-hd-disabled")),Object(b.b)(i.ERROR_CONTAINER)}else e.type===l.a.Media.Event.PLAY?(Y.info("Player currently playing",{type:e.type,data:e.data,playerSource:n.getSource()}),n.isAd()||z.start("bolt_contentPlayRequested_to_contentPlaying"),t.invalidate()):e.type===l.a.Media.Event.PLAYING?n.isAd()||z.end("bolt_contentPlayRequested_to_contentPlaying"):e.type===l.a.Media.Event.PAUSED||(e.type===l.a.Media.Event.RESUME?(Y.info("Resume",{playerSource:n.getSource()}),n.isAd()||window.client.isMobile&&window.ContentPlayer.show(!0)):e.type===l.a.Media.Event.STOPPED?Y.info("Stopped",{playerSource:n.getSource()}):e.type===l.a.Media.Event.DURATION_CHANGE?Y.debug("Duration change",{duration:n.duration,playerSource:n.getSource()}):e.type===l.a.Media.Event.WAITING?Y.info("Waiting",{playerSource:n.getSource()}):e.type===l.a.Media.Event.LOAD_PROGRESS||e.type===l.a.Media.Event.TIME_UPDATE||(e.type===l.a.Media.Event.ENDED?n.isAd()?Y.info("Ended Ad"):Y.info("Ended",{playerSource:n.getSource()}):e.type===l.a.Media.Event.START_TIME_CHANGED?Y.debug("Start time changed",{playerSource:n.getSource()}):e.type===l.a.Player.Event.CONTENT_CHANGED||e.type===l.a.Media.Event.NOT_FOUND||e.type===l.a.Media.Event.NOT_SUPPORTED&&(n.isAd()||t.showError("Flash Player 11+ is required to view this content."))));t._dispatchEvent(e)}},{key:"showError",value:function(e){Object(b.f)(l.a.UI.ERROR_CONTAINER);var t=Object(b.a)(l.a.UI.ERROR_CONTAINER);t&&(t.firstElementChild.textContent=e),Object(b.b)(l.a.UI.LOADING_INDICATOR)}},{key:"init",value:function(e){var t=l.a.UI,i=this,o=window.Skin;o.style.width="100%",o.style.height="100%",i.cssClass&&Object(a.a)(window.Skin,i.cssClass),Object(a.g)(),Object(a.e)(),i._coreModules.push("appearanceManager"),F.a.buildAppearanceManager((function(e){i.appearanceManager=e})),!1===window.PlayerSettings.fullscreen&&(Y.info("Fullscreen disabled"),Object(b.d)(t.FULLSCREEN_BTN)),window.PlayerSettings.adOnly?(i.fixedControlbar=!0,Object(a.a)(window.document.body,"bolt-linear-ad-on")):(i._enableAgeGate=e,i.fixedControlbar=!1===window.PlayerSettings.appearance.controlbar.autohide,Y.info("Controlbar",{position:"fixed"}),i._coreModules.push("_loadingIndicator"),F.a.buildLoadingIndicator((function(e){i._loadingIndicator=e,i._uiModules.push(e)}))),window.client.isMobile?(i._buildVolumeControl(),Object(a.a)(document.body,"bolt-touch-input")):(i._buildVolumeControl(),n.e(29).then(n.bind(null,48)).then((function(e){var t=e.default;i.mouseInput=new t,i.mouseInput.on(l.a.UI.Event.MOUSE_OUT,(function(){i.onMouseOut(window.Skin)})),i.mouseInput.on(l.a.UI.Event.MOUSE_OVER,(function(){i.onMouseOver(window.Skin)}))})).catch((function(e){Y.warn("Caught Error",{message:e.message,stack:e.stack})}))),i._defaultBoxModel={width:o.style.width,height:o.style.height,marginTop:o.style.marginTop,marginLeft:o.style.marginLeft,marginBottom:o.style.marginBottom,marginRight:o.style.marginRight,paddingTop:o.style.paddingTop,paddingLeft:o.style.paddingLeft,paddingBottom:o.style.paddingBottom,paddingRight:o.style.paddingRight,zIndex:o.style.zIndex,position:o.style.position,top:o.style.top,right:o.style.right,bottom:o.style.bottom,left:o.style.left},i._buildContent(),i._buildControlBar(),i._buildScrubber(),i._buildWatermark(),i.setCurrentPlayer(window.ContentPlayer)}},{key:"_buildContent",value:function(){var e=this;F.a.buildContent((function(t){e._uiModules.push(t),e._content=t}))}},{key:"_buildVolumeControl",value:function(){var e=this;e._volumeControl||F.a.buildVolume((function(t){e._uiModules.push(t),e._volumeControl=t,e._volumeControl.addEventListener(l.a.VALUE_CHANGED,(function(t){e._dispatchEvent(l.a.UI.Event.CHANGE_VOLUME,t.data)}))}))}},{key:"_buildScrubber",value:function(){var e=this;e._scrubber||F.a.buildScrubber((function(t){e._uiModules.push(t),e._scrubber=t,e._scrubber.on(l.a.UI.Event.SEEK,(function(t){Y.info("Event: Seek",{currentTime:t.target._current,maxTime:t.target.max,seekTime:t.target.data,playerId:t.target.player.containerId}),e._dispatchEvent(t)}))}))}},{key:"_buildControlBar",value:function(){var e=this;e._controlbar||F.a.buildControlBar((function(t){e._uiModules.push(t),e._controlbar=t}))}},{key:"_buildPrerollScreen",value:function(){var e=this;e._prerollScreen||F.a.buildPrerollScreen((function(t){e._uiModules.push(t),e._prerollScreen=t}))}},{key:"_isEnabled",value:function(e){return!Object(a.b)(e,l.a.UI.UI_DISABLED_CLASS)}},{key:"_buildWatermark",value:function(){var e=this;F.a.buildWatermark((function(t){e._watermark=t,e._uiModules.push(e._watermark)}))}},{key:"_getModuleForElement",value:function(e){for(var t=0;t<this._uiModules.length;t++){var n=this._uiModules[t];if(n.UI===e)return n}return null}},{key:"size",value:function(e,t){var n=this,i=e,a=t;-1===e.indexOf("%")&&-1===e.indexOf("px")&&(i="".concat(e,"px")),-1===t.indexOf("%")&&-1===t.indexOf("px")&&(a="".concat(t,"px")),n._defaultBoxModel.width=i,n._defaultBoxModel.height=a,n.invalidate()}},{key:"onMouseOver",value:function(e){Object(a.d)(window.Skin,"bolt-mouse-out"),Object(a.a)(window.Skin,"bolt-mouse-over"),this._dispatchEvent(l.a.UI.Event.MOUSE_OVER,null,e)}},{key:"onMouseOut",value:function(e){Object(a.d)(window.Skin,"bolt-mouse-over"),Object(a.a)(window.Skin,"bolt-mouse-out"),this._dispatchEvent(l.a.UI.Event.MOUSE_OUT,null,e)}},{key:"invalidate",value:function(e){var t=this,n=t._uiModules;e&&(e.fullscreen!==t.fullscreen&&(t.fullscreen=e.fullscreen,t.mouseInput&&t.mouseInput.setFullscreen(t.fullscreen),Y.debug("Invalidate",{fullscreen:t.fullscreen}),t._controlbar.open()),e.customizer&&t.appearanceManager.update(e.customizer)),t.fixedScrubber?Object(a.a)(window.Skin,"bolt-static-scrubber"):Object(a.d)(window.Skin,"bolt-static-scrubber"),t.fixedControlbar?(t._controlbar.open(),Object(a.a)(window.Skin,"bolt-static-control-bar")):Object(a.d)(window.Skin,"bolt-static-control-bar"),t.currentPlayer&&t.currentPlayer.setFullscreen(t.fullscreen);for(var i=0;i<n.length;i++)n[i].invalidate();!0===t._isReady&&(window.client.browser.ie>0&&window.client.browser.ie<12?(t._controlbar.open(),t._titleBar&&t._titleBar.open()):window.Skin.style.visibility="visible"),Object(a.f)(window.Skin.clientWidth)}},{key:"_onVolumeChanged",value:function(e){void 0===e.data||e.data<0||e.data>1?Y.info("Volume changed attempt, failed",{type:e.type,value:e.data}):(Y.info("Volume changed",{type:e.type,value:e.data}),void 0!==e.data?this._dispatchEvent(e.type,e.data):Y.warn("No volume data"))}},{key:"_onMuted",value:function(e){Object(a.d)(window.Skin,"bolt-automute-disabled"),Object(a.a)(window.Skin,"bolt-automute-enabled"),this._dispatchEvent(e.type)}},{key:"_onUnmuted",value:function(e){Object(a.d)(window.Skin,"bolt-automute-enabled"),Object(a.a)(window.Skin,"bolt-automute-disabled"),this._dispatchEvent(e.type)}},{key:"getAppearanceSettings",value:function(){this.appearanceManager.getInitialSettings()}}])&&j(i.prototype,o),r&&j(i,r),t}(c.a),K=n(26),Z=new i.a("IFRAME-VIEW-EVENTS"),X=function(e){var t,n=window.zeus_ga.label,i=window.zeus_ga.category,a=window.CurrentVideoConfig.content.videoId||0,o=Object(u.f)(),r="[videoId=".concat(a,"']");return e&&"function"==typeof e.isAd&&(t=e.isAd()?"".concat(n.ad," ").concat(r):"".concat(n.content," ").concat(r)),{gaCategory:i,gaLabel:n,videoId:a,publisherId:o,labelSuffix:r,selectedGALabel:t}},$=function(e){window.PlayerView.currentPlayer;e.type,l.a.Media.Event.TIME_UPDATE,e.type===l.a.Player.Event.LOADED?ee(e):e.type===l.a.Media.Event.METADATA?te(e):e.type===l.a.Media.Event.PLAY?ne(e):e.type===l.a.Media.Event.PLAYING?ie(e):e.type===l.a.Media.Event.STOPPED?ae(e):e.type===l.a.Media.Event.PAUSED?oe(e):e.type===l.a.Media.Event.RESUME?re(e):e.type===l.a.Media.Event.ENDED?de(e):e.type===l.a.Ad.Event.CUEPOINT?se(e):e.type===l.a.Ad.Event.FAILED?le(e):e.type===l.a.Media.Event.FIRSTQUARTILE?ue(e):e.type===l.a.Media.Event.MIDPOINT?ce(e):e.type===l.a.Media.Event.THIRDQUARTILE?he(e):e.type===l.a.Media.Event.NOT_FOUND?ve(e):e.type===l.a.Player.Event.CONFIG_NOT_FOUND?we(e):e.type===l.a.UI.Event.REQUEST_FULLSCREEN_CHANGE?ye(e):e.type===l.a.UI.Event.AGE_GATE_PASSED?fe(e):e.type===l.a.UI.Event.AGE_GATE_FAILED?Ee(e):e.type===l.a.UI.Event.APPEARANCE_SETTINGS_CHANGED?pe(e):e.type===l.a.UI.Event.INITIAL_APPEARANCE_SETTINGS_LOADED?ge(e):e.type===l.a.Media.Event.VOLUME_CHANGED?_e(e):e.type===l.a.Media.Event.TIME_UPDATE?be(e):e.type===l.a.Player.Event.CONFIG_CHANGED&&Ae(e)},ee=function(e){window.Bolt.dispatchEvent("playerLoaded",e.data)},te=function(){window.Bolt.dispatchEvent(window.Bolt.BOLT_CONTENT_STATE_CHANGED,{state:"ready"})},ne=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel;if(n.isAd()){var s,l,c;window.postLogMessage("Ad starts"),"precontent"===window.PlayerSettings.playerType&&t.dispatchEvent(t.SET_IFRAME_VISIBILITY,{visibilityVal:"visible"});try{l=(c=window.BoltAdManager.ad.linear).tracking.events.click,s=Object(u.z)(c.clickThrough)}catch(e){}t.dispatchEvent(t.BOLT_AD_STARTED,{videoId:a,publisherId:o,linear:window.BoltAdManager.isLinear(),click_url:s,click_trackers:l}),t.dispatchAnalyticsEvent(t.BOLT_AD_STARTED,r.state,d),window.BoltAdManager.selectedVMAPBreak&&setTimeout((function(){window.BoltAdManager.trackVMAPEvent("breakStart")}),100)}else t.dispatchEvent(t.BOLT_CONTENT_STARTED,{videoId:a,publisherId:o,title:window.CurrentVideoConfig.settings.title,duration:window.CurrentVideoConfig.duration}),window.postLogMessage("Content starts"),t.dispatchAnalyticsEvent(t.BOLT_CONTENT_STARTED,r.state,d)},ie=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.gaCategory,o=i.selectedGALabel;window.videoConfigChanged=!1,n.isAd()||t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"playing"}),t.dispatchAnalyticsEvent("playing",a.state,o)},ae=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.gaCategory,o=i.selectedGALabel;n.isAd()||(t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"stopped"}),t.dispatchAnalyticsEvent("stopped",a.state,o))},oe=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.gaCategory,o=i.selectedGALabel;n.isAd()||(window.postLogMessage("Content is paused"),t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"paused"}),t.dispatchAnalyticsEvent("paused",a.state,o))},re=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.gaCategory,o=i.selectedGALabel;n.isAd()||(window.postLogMessage("Content is resumed"),t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"resume"}),t.dispatchAnalyticsEvent("resume",a.state,o))},de=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.gaCategory,o=i.selectedGALabel,r=i.videoId,d=i.publisherId;n.isAd()?(window.postLogMessage("Ad ends"),t.dispatchEvent(t.BOLT_AD_COMPLETE,{videoId:r,publisherId:d}),t.dispatchAnalyticsEvent(t.BOLT_AD_COMPLETE,a.state,o)):(window.postLogMessage("Content ends"),t.dispatchEvent(t.BOLT_CONTENT_COMPLETE,{videoId:r,publisherId:d}),t.dispatchAnalyticsEvent(t.BOLT_CONTENT_COMPLETE,a.state,o))},se=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.gaCategory,o=i.selectedGALabel;window.postLogMessage("Cuepoint at ".concat(e.data," seconds is hit")),t.dispatchEvent(t.BOLT_AD_CUEPOINT,{cuepoint:e.data}),t.dispatchAnalyticsEvent(t.BOLT_AD_CUEPOINT,a.state,o,e.data)},le=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.videoId,o=i.publisherId,r=i.gaCategory;window.postLogMessage("".concat(e.data.timing," Ad error"),"error"),(window.CurrentVideoConfig.settings.hiddenContainer||window.CurrentVideoConfig.settings.postAdContainer)&&t.dispatchEvent(t.PRE_CONTENT_AD_ERROR,{state:"noAdsAvailable"}),t.dispatchEvent(t.BOLT_AD_ERROR,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent("boltAdRequestFailed",r.state,"zeus ".concat(e.data.timing))},ue=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel,s=n.isAd()?"Ad":"Content";window.postLogMessage("".concat(s," reached first quartile")),n.isAd()&&t.dispatchEvent(t.BOLT_FIRST_QUARTILE,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent(t.BOLT_FIRST_QUARTILE,r.state,d)},ce=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel,s=n.isAd()?"Ad":"Content";window.postLogMessage("".concat(s," reached midpoint")),n.isAd()&&t.dispatchEvent(t.BOLT_MIDPOINT,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent(t.BOLT_MIDPOINT,r.state,d)},he=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel,s=n.isAd()?"Ad":"Content";window.postLogMessage("".concat(s," reached third quartile")),n.isAd()&&t.dispatchEvent(t.BOLT_THIRD_QUARTILE,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent(t.BOLT_THIRD_QUARTILE,r.state,d)},ve=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.gaCategory,o=i.selectedGALabel;t.dispatchEvent(t.BOLT_CONTENT_ERROR),t.dispatchAnalyticsEvent("boltContentNotFound",a.state,o)},we=function(e){var t=window.Bolt,n=e.target,i=X(n),a=i.gaCategory,o=i.selectedGALabel;t.dispatchEvent(t.BOLT_CONTENT_ERROR),t.dispatchAnalyticsEvent("boltConfigNotFound",a.state,o)},ye=function(e){window.Bolt.dispatchEvent(e.type,e.data)},fe=function(e){var t=window.Bolt;window.CurrentVideoConfig.settings.minAge>0&&(Z.info("Age gate",{passed:!0}),t.dispatchEvent(t.BOLT_AGE_GATE_PASSED,e.data))},Ee=function(e){var t=window.Bolt;Z.info("Age gate",{passed:!1}),t.dispatchEvent(t.BOLT_AGE_GATE_FAILED)},pe=function(e){window.Bolt.dispatchEvent(e.type,e.data)},ge=function(e){window.Bolt.dispatchEvent(e.type,e.data)},_e=function(e){var t=window.Bolt;Z.info("Volume changed",{value:e.data}),t.dispatchEvent(t.BOLT_VOLUME_CHANGED,e.data)},be=function(e){var t=window.Bolt;t.dispatchEvent(t.BOLT_TIME_CHANGED,e.data)},Ae=function(){window.Bolt.dispatchEvent("videoConfigChanged",window.CurrentVideoConfig)};function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return Ce}));var Te=new i.a("IFRAME"),Ce=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Se(this,"BOLT_CONTENT_STARTED","boltContentStarted"),Se(this,"BOLT_CONTENT_COMPLETE","boltContentComplete"),Se(this,"BOLT_CONTENT_ERROR","boltContentError"),Se(this,"BOLT_CONTENT_STATE_CHANGED","boltContentStateChanged"),Se(this,"BOLT_TOGGLE_FULLSCREEN","boltToggleFullscreen"),Se(this,"BOLT_FIRST_QUARTILE","boltFirstQuartile"),Se(this,"BOLT_MIDPOINT","boltMidPoint"),Se(this,"BOLT_THIRD_QUARTILE","boltThirdQuartile"),Se(this,"BOLT_AD_STARTED","boltAdStarted"),Se(this,"BOLT_AD_IMPRESSION","boltAdImpression"),Se(this,"BOLT_AD_VIDEO_START","boltAdVideoStart"),Se(this,"BOLT_AD_PLAYING","boltAdPlaying"),Se(this,"BOLT_AD_PAUSED","boltAdPaused"),Se(this,"BOLT_AD_COMPLETE","boltAdComplete"),Se(this,"BOLT_AD_ERROR","boltAdError"),Se(this,"BOLT_AGE_GATE_PASSED","boltAgeGatePassed"),Se(this,"BOLT_AGE_GATE_FAILED","boltAgeGateFailed"),Se(this,"BOLT_VOLUME_CHANGED","boltVolumeChanged"),Se(this,"BOLT_AD_CUEPOINT","boltAdCuepoint"),Se(this,"BOLT_TIME_CHANGED","boltTimeChanged"),Se(this,"SET_IFRAME_VISIBILITY","boltSetIframeVisibility"),Se(this,"PRE_CONTENT_AD_ERROR","noAdsAvailable"),Se(this,"sessionVideoPlayCount",1),Se(this,"embeds",void 0),Se(this,"FlashShim",void 0),Se(this,"Video",void 0),Se(this,"onMediaConfigProcessed",(function(e){var n=t;n.PWBM.end("bolt_coreJSLoaded_to_manifestParsed");var i=window.PlayerSettings,a=i.skin||n._defaultSkin,o=i.css||n._defaultCss,r=i.cssClass;Te.info("Event CB",{evt:"onMediaConfigProcessed",value:e,data:window.CurrentVideoConfig.content.media}),void 0!==window.CurrentVideoConfig.content.media.f4m?e&&(window.CurrentVideoConfig.content.media=e):window.CurrentVideoConfig.content.media=e;var d=l.a.Player.ID_PREFIX+window.id;n._renderVideo(d,a,o,r)})),Se(this,"processCustomEmbedTags",(function(){if(window.PlayerSettings.adTag||window.PlayerSettings.desktopAdTag||window.PlayerSettings.html5AdTag||window.PlayerSettings.mobileAdTag||window.PlayerSettings.vmapAdTag){window.PlayerSettings.embedAds={servers:[{type:null,tags:{default:{standard:{},html5:{}}}}]};var e=window.PlayerSettings.embedAds.servers[0],t=function(e){return"mobile"===e?window.PlayerSettings.adTag=window.PlayerSettings.vmapAdTag||window.PlayerSettings.mobileAdTag||window.PlayerSettings.adTag:"flash"===e?window.PlayerSettings.adTag=window.PlayerSettings.vmapAdTag||window.PlayerSettings.desktopAdTag||window.PlayerSettings.adTag:"desktop"===e&&(window.PlayerSettings.adTag=window.PlayerSettings.vmapAdTag||window.PlayerSettings.html5AdTag||window.PlayerSettings.adTag),Te.debug("Embed ".concat(e," ad tag"),window.PlayerSettings.adTag),window.PlayerSettings.vmapAdTag?{vmap:window.PlayerSettings.adTag}:{preroll:window.PlayerSettings.adTag,midroll:window.PlayerSettings.adTag}};window.client.isMobile?e.tags.default.html5.mobile=t("mobile"):window.client.hasFlash?e.tags.default.standard=t("flash"):e.tags.default.html5.desktop=t("desktop"),e.type=(n=window.PlayerSettings.adTag,/g.doubleclick/.test(n)?"generic-google":"generic-vast"),Te.debug("Embed ad settings",window.PlayerSettings.embedAds)}var n}));var n=this;n.PWBM=window.BENCHMARK,n.PWBM.end("bolt_bootCall_to_iframeScriptLoaded"),n.PWBM.start("bolt_iframeScriptLoaded_to_coreJSLoaded"),n.PWBM.start("bolt_coreJSLoaded_to_zeusAvailable"),n.PWBM.start("bolt_coreJSLoaded_to_renderPlayerCall"),n.PWBM.start("bolt_coreJSLoaded_to_initVideoCall"),n.PWBM.start("bolt_coreJSLoaded_to_initAdsCall"),n.PWBM.start("bolt_coreJSLoaded_to_manifestRequested"),n.PWBM.start("bolt_coreJSLoaded_to_manifestLoaded"),n.PWBM.start("bolt_coreJSLoaded_to_manifestParsed"),n.PWBM.start("bolt_coreJSLoaded_to_controllerStartUp"),n.PWBM.start("bolt_coreJSLoaded_to_skinRequested"),window.PlayerState=new s,n.controller=new G,n._isFullscreen=!1,n.playerRendered=!1,n._baseUrl=window.zeusBaseUrl,n._swfUrl="".concat(n._baseUrl,"/swf/zeusplayer-9298ef2f7b.swf"),n._defaultSkin="".concat(n._baseUrl,"/skins/pegasus.html"),n._defaultAdSkin="".concat(n._baseUrl,"/skins/pegasus.html"),n._defaultCss="".concat(n._baseUrl,"/skins/pegasus.css"),n._dispatchTrackingEvent=n._dispatchTrackingEvent.bind(n),n.dispatchEvent=n.dispatchEvent.bind(n),n.dispatchAnalyticsEvent=n.dispatchAnalyticsEvent.bind(n),n._onAdRequested=n._onAdRequested.bind(n),n._onAdQueued=n._onAdQueued.bind(n),n.renderPlayer=n.renderPlayer.bind(n),n.setBaseUrl=n.setBaseUrl.bind(n),n.getBaseUrl=n.getBaseUrl.bind(n),n.getCSSUrl=n.getCSSUrl.bind(n),n.getSWFUrl=n.getSWFUrl.bind(n),n.initVideo=n.initVideo.bind(n),n.playMedia=n.playMedia.bind(n),n.replayMedia=n.replayMedia.bind(n),n.closeVideo=n.closeVideo.bind(n),n.pauseMedia=n.pauseMedia.bind(n),n.togglePlay=n.togglePlay.bind(n),n.stopMedia=n.stopMedia.bind(n),n.setVolume=n.setVolume.bind(n),n.getVolume=n.getVolume.bind(n),n.muteMedia=n.muteMedia.bind(n),n.unmuteMedia=n.unmuteMedia.bind(n),n.seek=n.seek.bind(n),n.updateViewabilityMetrics=n.updateViewabilityMetrics.bind(n),n.PWBM.end("bolt_iframeScriptLoaded_to_coreJSLoaded"),n.PWBM.end("bolt_coreJSLoaded_to_zeusAvailable"),n.init()}var t,i,o;return t=e,(i=[{key:"init",value:function(){}},{key:"setBaseUrl",value:function(e){this._baseUrl=e,l.a.Player.getSWFRoot=function(){return"".concat(this._baseUrl,"/frame/swf")},this._swfUrl="".concat(this._baseUrl,"/frame/swf/zeusplayer-9298ef2f7b.swf"),this._defaultSkin="pegasus.html",this._defaultAdSkin="pegasus.html",this._defaultCss="pegasus.css"}},{key:"getBaseUrl",value:function(){return this._baseUrl}},{key:"renderPlayer",value:function(){var e=this;if(!e.playerRendered){e.PWBM.end("bolt_coreJSLoaded_to_renderPlayerCall"),e.playerRendered=!0,window.CurrentVideoConfig.settings=Object(u.r)(window.CurrentVideoConfig.settings,window.PlayerSettings),Te.info("Player settings",{data:window.PlayerSettings});var t,i=function(t){if(void 0===t.disabled)e.initVideo();else{var n=document.body;if(void 0!==t.disabled.image&&(n.style.backgroundImage="url('".concat(t.disabled.image,"')")),void 0!==t.disabled.message){var i=document.createElement("div");i.id="disabled-msg",i.innerHTML=t.disabled.message,i.style.fontSize="24px",i.style.backgroundColor="#ffffff",i.style.border="1px solid #000000",i.style.padding="5px",i.style.position="relative",i.style.top="40%",i.style.marginLeft="auto",i.style.marginRight="auto",i.style.textAlign="center",n.appendChild(i)}}};if(window.client.isMobile)i(window.CurrentVideoConfig);else if(null===window.client.hasFlash){var a=window.client.browser.ie>0;if("amp"===window.site.hostapp||"precontent"===window.PlayerSettings.playerType&&a)return window.client.hasFlash=!1,e.dispatchEvent("flashdetection",null),void i(window.CurrentVideoConfig);(t=Object(u.f)())&&"1020945"===t.toString()?(e.PWBM.start("bolt_legacyFlashDetection"),n.e(6).then(n.bind(null,38)).then((function(t){(0,t.default)((function(t){window.DebugMode.noFlash&&(t=null),e.PWBM.end("bolt_legacyFlashDetection"),window.client.hasFlash=!!t,e.dispatchEvent("flashdetection",{version:t}),i(window.CurrentVideoConfig)}))}))):(e.PWBM.start("bolt_flashDetection"),n.e(6).then(n.bind(null,39)).then((function(t){(0,t.default)((function(t){window.DebugMode.noFlash&&(t=null),e.PWBM.end("bolt_flashDetection"),window.client.hasFlash=!!t,e.dispatchEvent("flashdetection",{version:t}),i(window.CurrentVideoConfig)}))})))}else i(window.CurrentVideoConfig)}}},{key:"initVideo",value:function(){this.PWBM.end("bolt_coreJSLoaded_to_initVideoCall");var e=window.PlayerSettings;!window.client.isMobile&&window.client.hasFlash&&e.forceFlash&&window.client.supportedVideoTypes.indexOf("m3u8")>-1&&window.client.supportedVideoTypes.splice(window.client.supportedVideoTypes.indexOf("m3u8"),1),Object(u.u)(window.CurrentVideoConfig.content.media,this.onMediaConfigProcessed)}},{key:"_renderVideo",value:function(e,t,i,o){var r,d=this,s=document.body,l=window.CurrentVideoConfig.settings.defaultHd;if(!0===l?(window.CurrentVideoConfig.content.media.hd&&(r=Object(u.v)(window.CurrentVideoConfig.content.media.hd)),r||(delete window.CurrentVideoConfig.content.media.hd,l=!1,r=Object(u.v)(window.CurrentVideoConfig.content.media.sd))):(window.CurrentVideoConfig.content.media.sd&&(r=Object(u.v)(window.CurrentVideoConfig.content.media.sd)),r||(delete window.CurrentVideoConfig.content.media.sd,l=!0,r=Object(u.v)(window.CurrentVideoConfig.content.media.hd))),window.PlayerSettings.defaultHd=l,r){if((window.PlayerSettings.forceFlash||r.indexOf(".mp4")>-1&&window.client.browser.firefoxWithoutMp4)&&!window.client.hasFlash)return void d._flashNotAvailableError();s.setAttribute("data-default-src",r),d.PWBM.start("bolt_loadCSS_to_CSSLoaded"),n.e(19).then(n.t.bind(null,40,7)).then((function(n){d.PWBM.end("bolt_loadCSS_to_CSSLoaded"),d._loadSkin(e,t,o)})).catch((function(e){Te.error("Caught Error",{message:e.message,stack:e.stack})}))}else{var c=document.createElement("p");c.id="err-msg",c.style.color="red",c.style.position="absolute",Object(a.b)(s,"flash_required")?c.textContent='Flash Player 11 or newer is required. Get it <a href="http://get.adobe.com/flashplayer/" title="Adobe" style="color:inherit">here</a>.':c.textContent="Media not supported",s.appendChild(c)}}},{key:"_flashNotAvailableError",value:function(){for(var e=document.body;e.firstChild;)e.removeChild(e.firstChild);this.dispatchEvent(l.a.Player.Event.FATAL_ERROR,"Flash is required"),Te.error("Flash is required but not detected")}},{key:"_onAdQueued",value:function(e){this.dispatchEvent("boltAdQueued",e.data)}},{key:"_onAdRequested",value:function(e){var t=window.CurrentVideoConfig.content.videoId||0,n="[videoId=".concat(t,"]");this.dispatchAnalyticsEvent("boltRequestAdSpot ".concat(window.BoltAdManager.timing),"ad",n),this.dispatchEvent("boltAdRequestStart",e.data)}},{key:"_bindAdListeners",value:function(e,t){var i=this;n.e(2).then(n.bind(null,26)).then((function(e){var t=e.default;window.AdSession=new t,window.AdSession.on(l.a.Ad.Event.SESSION_START,i._dispatchTrackingEvent),window.AdSession.on(l.a.Ad.Event.SESSION_ABORT,i._dispatchTrackingEvent),window.AdSession.on(l.a.Ad.Event.SESSION_END,i._dispatchTrackingEvent),window.AdSession.on(l.a.Ad.Event.SESSION_FAIL,i._dispatchTrackingEvent)})),n.e(2).then(n.bind(null,41)).then((function(e){var t=e.default;window.AdRequest=new t,window.AdRequest.on(l.a.Ad.Event.REQUEST_START,i._dispatchTrackingEvent),window.AdRequest.on(l.a.Ad.Event.REQUEST_ABORT,i._dispatchTrackingEvent),window.AdRequest.on(l.a.Ad.Event.REQUEST_SUCCESS,i._dispatchTrackingEvent),window.AdRequest.on(l.a.Ad.Event.REQUEST_FAIL,i._dispatchTrackingEvent)})),n.e(2).then(n.bind(null,42)).then((function(e){var t=e.default;window.SSTracker=new t})),n.e(2).then(n.bind(null,61)).then((function(n){var a=n.default;window.BoltAdManager=new a(window.DebugMode.dcOverride,e),window.BoltAdManager.addEventListener(l.a.Ad.Event.QUEUED,i._onAdQueued),window.BoltAdManager.addEventListener(l.a.Ad.Event.REQUESTED,i._onAdRequested),window.BoltAdManager.addEventListener(l.a.Ad.Event.CLICKED,i._dispatchTrackingEvent),window.BoltAdManager.init((function(){Te.debug("BoltAdManager initialized. Selected ad server object",window.BoltAdManager.selectedServer),t()}))}))}},{key:"_initAds",value:function(e){var t=this;t.PWBM.end("bolt_coreJSLoaded_to_initAdsCall");var i="ad_".concat(window.id),a=Object(b.a)(l.a.UI.AD_CONTAINER);if(a&&(l.a.AD_CONTAINER=i,l.a.UI.AD_CONTAINER=i,a.setAttribute("id",i)),window.client.isMobile&&(!window.google||!window.google.ima)){var o="https:"===document.location.protocol?"https://imasdk.googleapis.com/js/sdkloader/ima3.js":"http://imasdk.googleapis.com/js/sdkloader/ima3.js",r=document.createElement("script");r.onload=function(){Te.info("Google IMA script attached"),l.a.Ad.IMA_ENABLED=!0,n.e(2).then(n.bind(null,43)).then((function(e){var t=e.default;window.MobileIMAPlayer=new t(window.BoltAdManager),Te.debug("MobileIMAPlayer",{container:window.MobileIMAPlayer.container.id,adType:window.MobileIMAPlayer.type})}))},r.src=o,document.getElementsByTagName("head")[0].appendChild(r)}t.processCustomEmbedTags(),t._bindAdListeners(i,e)}},{key:"_dispatchTrackingEvent",value:function(e){this.dispatchEvent(e.type,e.data)}},{key:"_start",value:function(e){var t=this;if(void 0===window.ContentPlayer)return Te.info("Content player undefined. Unable to start",{videoId:e}),null;window.ContentPlayer.show(!1),window.AdBlockDetected&&(Te.info("Ad block",{detected:1,msg:"Tracking blocked ad session",data:{videoId:e}}),window.AdSession=new K.default,window.AdSession.on(l.a.Ad.Event.SESSION_START,t._dispatchTrackingEvent),window.AdSession.start(!1),n.e(12).then(n.bind(null,44)).then((function(e){var n=e.default;window.AdBlocked=new n,window.AdBlocked.on(l.a.Ad.Event.SESSION_BLOCKED,t._dispatchTrackingEvent)})));var i=function(){if(window.PlayerView.addEventListener(l.a.Media.Event.TIME_UPDATE,$),window.PlayerView.addEventListener(l.a.Media.Event.METADATA,$),window.PlayerView.addEventListener(l.a.Media.Event.PLAY,$),window.PlayerView.addEventListener(l.a.Media.Event.PLAYING,$),window.PlayerView.addEventListener(l.a.Media.Event.STOPPED,$),window.PlayerView.addEventListener(l.a.Media.Event.PAUSED,$),window.PlayerView.addEventListener(l.a.Media.Event.RESUME,$),window.PlayerView.addEventListener(l.a.Media.Event.ENDED,$),window.PlayerView.addEventListener(l.a.Media.Event.FIRSTQUARTILE,$),window.PlayerView.addEventListener(l.a.Media.Event.MIDPOINT,$),window.PlayerView.addEventListener(l.a.Media.Event.THIRDQUARTILE,$),window.PlayerView.addEventListener(l.a.Media.Event.VOLUME_CHANGED,$),window.PlayerView.addEventListener(l.a.Ad.Event.CUEPOINT,$),window.PlayerView.addEventListener(l.a.Ad.Event.FAILED,$),window.PlayerView.addEventListener(l.a.Media.Event.NOT_FOUND,$),window.PlayerView.addEventListener(l.a.Player.Event.CONFIG_NOT_FOUND,$),window.PlayerView.addEventListener(l.a.UI.Event.REQUEST_FULLSCREEN_CHANGE,$),window.PlayerView.addEventListener(l.a.UI.Event.AGE_GATE_PASSED,$),window.PlayerView.addEventListener(l.a.UI.Event.AGE_GATE_FAILED,$),window.PlayerView.addEventListener(l.a.Player.Event.CONFIG_CHANGED,$),window.PlayerView.addEventListener(l.a.Player.Event.LOADED,$),window.PlayerView.addEventListener(l.a.UI.Event.APPEARANCE_SETTINGS_CHANGED,$),window.PlayerView.addEventListener(l.a.UI.Event.INITIAL_APPEARANCE_SETTINGS_LOADED,$),window.PlayerView.addEventListener(l.a.Media.Event.PLAY,t._dispatchTrackingEvent),!window.fullscreenEnabled&&window.client.hasTouch&&window.addEventListener("touchmove",(function(e){t._isFullscreen&&(e.preventDefault(),Te.debug("Event CB",{evt:"Touchmove prevented",id:window.id}))})),Pe(window.CurrentVideoConfig.settings.googleAnalytics)){var e=window.CurrentVideoConfig.settings.googleAnalytics;Te.debug("Publisher GA Tracking Id",{trackingID:e}),t.dispatchEvent("start_google_analytics",{pubTrackingId:e,universal:window.CurrentVideoConfig.settings.googleUniversal})}t.controller.startUp()};return"off"===window.PlayerSettings.advertising?(Te.info("Advertising is disabled via embed setting"),window.postLogMessage("Advertising is disabled via embed setting","warn"),i()):t._initAds(i),window.id}},{key:"dispatchAnalyticsEvent",value:function(e,t,n,i){n&&this.dispatchEvent("analyticsEvent",{action:e,category:t,label:n,value:i})}},{key:"_removeIosInlineAttribute",value:function(e){e.removeAttribute("muted"),e.removeAttribute("playsinline"),e.muted=!1}},{key:"_onSkinLoaded",value:function(e,t,i){var a=this;a.PWBM.end("bolt_loadSkin_to_skinLoaded");var o,r,d=document.body;e&&(d.insertAdjacentHTML("beforeend",e),function(){var e=document.body.getElementsByClassName("bolt-poster")[0];if(e){var t=Object(u.g)(window.CurrentVideoConfig.content);t&&(e.style.backgroundImage="url(".concat(t,")"),e.style.backgroundPosition="center center",e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat")}}(),r=d.getElementsByClassName("bolt-container")[0],window.Skin=r,r.style.visibility="hidden",(o=Object(b.a)(l.a.UI.MAIN_VIDEO_CONTAINER).firstElementChild).setAttribute("id",t),window.client.system.ios&&window.PlayerSettings.autoplay||a._removeIosInlineAttribute(o),window.PlayerSettings.forceFlash?window.client.hasFlash?(Te.info("Using Flash for playing video"),n.e(7).then(n.bind(null,45)).then((function(e){var n=e.default;a.FlashShim=n,window.ContentPlayer=new n(window.id,t,"window.ContentPlayer"),window.ContentPlayer.muted=!0===window.PlayerSettings.automute,window.ContentPlayer.volume=window.PlayerSettings.volume,0===window.ContentPlayer.volume&&(window.ContentPlayer.muted=!0),window.ContentPlayer.currentQuality=window.PlayerSettings.defaultHd?"hd":"sd",window.PlayerView=new J(i);var o=setInterval((function(){if(window.ContentPlayer.playerReady)return Te.info("Content Player is ready",{id:window.ContentPlayer.containerId}),clearInterval(o),a._start(t)}),100)}))):a._flashNotAvailableError():function(){if(window.client.isMobile){var e=function(e){return a.Video=e,window.ContentPlayer=new e(window.id,t,!1),window.ContentPlayer.muted=!!window.PlayerSettings.autoplay,window.ContentPlayer.currentQuality=window.PlayerSettings.defaultHd?"hd":"sd",window.PlayerView=new J(i),a._start(t)};window.client.system.ios?Promise.resolve().then(n.bind(null,19)).then((function(t){var n=t.default;e(n)})).catch((function(e){Te.error("Caught Error",{message:e.message,stack:e.stack})})):Promise.resolve().then(n.bind(null,20)).then((function(t){var n=t.default;e(n)})).catch((function(e){Te.error("Caught Error",{message:e.message,stack:e.stack})}))}else Promise.resolve().then(n.bind(null,21)).then((function(e){var n=e.default;return window.PlayerView=new J(i),a.Video=n,window.ContentPlayer=new n(window.id,t,!1),window.ContentPlayer.muted=!0===window.PlayerSettings.automute,window.ContentPlayer.volume=window.PlayerSettings.volume,0===window.ContentPlayer.volume&&(window.ContentPlayer.muted=!0),window.ContentPlayer.currentQuality=window.PlayerSettings.defaultHd?"hd":"sd",a._start(t)})).catch((function(e){Te.error("Caught Error",{message:e.message,stack:e.stack})}))}())}},{key:"_loadSkin",value:function(e,t,i){var a=this;a.PWBM.end("bolt_coreJSLoaded_to_skinRequested"),a.PWBM.start("bolt_loadSkin_to_skinLoaded"),n.e(19).then(n.t.bind(null,46,7)).then((function(t){var n=t.default;a._onSkinLoaded(n,e,i)}))}},{key:"playMedia",value:function(){this.controller.playPrerollAd()}},{key:"stopMedia",value:function(){this.controller.stop()}},{key:"replayMedia",value:function(){this.controller.replay()}},{key:"closeVideo",value:function(){this.controller.closeVideo()}},{key:"pauseMedia",value:function(){this.controller.pause()}},{key:"muteMedia",value:function(){this.controller.mute(!0)}},{key:"unmuteMedia",value:function(){this.controller.mute(!1)}},{key:"togglePlay",value:function(){this.controller.togglePlayPause()}},{key:"seek",value:function(e){this.controller.seek(e)}},{key:"setVolume",value:function(e){e>1?e=1:e<0&&(e=0),this.controller.setVolume(e)}},{key:"getVolume",value:function(){if(window.PlayerView.currentPlayer)return window.PlayerView.currentPlayer.volume}},{key:"getCSSUrl",value:function(){return this._defaultCss}},{key:"getSWFUrl",value:function(){return this._swfUrl}},{key:"dispatchEvent",value:function(e,t){var n=this,i=!1;try{i=window.PlayerView.currentPlayer.isAd()}catch(e){}var a={type:"zeus_event",name:e,id:window.id,isAd:i,data:t};window.parent.postMessage(JSON.stringify(a),"*");var o,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"boltAds",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bolt_ad_playback_milestones";return{pipeline:t,eventType:n,data:e}};switch(e){case l.a.Media.Event.PLAY:break;case l.a.Player.Event.LOADED:o=r(t,"bolt_players");break;case l.a.Ad.Event.SESSION_START:o=r(t,"bolt_ad_sessions"),window.AdBlockDetected&&window.AdSession&&(window.AdSession.off(l.a.Ad.Event.SESSION_START),delete window.AdSession);break;case l.a.Ad.Event.SESSION_FAIL:t.resultType="failed",o=r(t,"bolt_ad_sessions_results");break;case l.a.Ad.Event.SESSION_ABORT:t.resultType="aborted",o=r(t,"bolt_ad_sessions_results");break;case l.a.Ad.Event.SESSION_END:t.resultType="complete",o=r(t,"bolt_ad_sessions_results");break;case l.a.Ad.Event.SESSION_BLOCKED:t.resultType="blocked",o=r(t,"bolt_ad_sessions_results");break;case l.a.Ad.Event.REQUEST_START:o=r(t,"bolt_ad_requests");break;case l.a.Ad.Event.REQUEST_SUCCESS:t.resultType="succeeded",o=r(t,"bolt_ad_request_results");break;case l.a.Ad.Event.REQUEST_FAIL:t.resultType="failed",o=r(t,"bolt_ad_request_results");break;case l.a.Ad.Event.REQUEST_ABORT:t.resultType="aborted",o=r(t,"bolt_ad_request_results");break;case n.BOLT_AD_STARTED:t.milestone="started",o=r(t);break;case n.BOLT_FIRST_QUARTILE:t.milestone="q1",o=r(t);break;case n.BOLT_MIDPOINT:t.milestone="q2",o=r(t);break;case n.BOLT_THIRD_QUARTILE:t.milestone="q3",o=r(t);break;case n.BOLT_AD_COMPLETE:t.milestone="complete",o=r(t);break;case n.BOLT_AD_ERROR:t.milestone="error",o=r(t);break;case l.a.Ad.Event.CLICKED:o=r({clickUrl:t},"bolt_ad_clicks")}o&&(window.kinesis?window.kinesis.send(o.eventType,o.data,o.pipeline):window.kinesisEventQueue.push(o))}},{key:"updateViewabilityMetrics",value:function(e){this.controller.updateViewabilityMetrics(e)}}])&&me(t.prototype,i),o&&me(t,o),e}()}}]);