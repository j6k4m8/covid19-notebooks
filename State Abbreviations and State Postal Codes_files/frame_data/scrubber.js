(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{32:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return E}));var n=i(12),r=i(23),a=i.n(r),o=i(3),l=i(4),d=(i(2),i(0)),s=i(1);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,i){return t&&f(e.prototype,t),i&&f(e,i),e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var b=function(){function e(){_(this,e),h(this,"_timer",void 0)}return y(e,[{key:"init",value:function(){var e=this;window.Skin.addEventListener("click",(function(){e.start()}))}},{key:"stop",value:function(){clearTimeout(this._timer)}},{key:"start",value:function(){var e=this;e._timer&&clearTimeout(e._timer),Object(s.a)(window.document.body,"tap-on"),e._timer=setTimeout((function(){Object(s.d)(window.document.body,"tap-on")}),3e3)}}]),e}(),w=function(){function e(t){_(this,e),h(this,"element",void 0),h(this,"pointer",void 0),h(this,"label",void 0),h(this,"borderRadius",void 0),h(this,"pointerWidth",void 0),h(this,"scrubber",void 0),this.playerView=window.PlayerView,this.scrubber=t,this._container=t._container}return y(e,[{key:"initTooltip",value:function(){var e=this;e.element=document.getElementById("scrubber-tooltip"),e.label=e.element.lastElementChild,e.pointer=e.element.firstElementChild,e.borderRadius=parseFloat(getComputedStyle(e.element).borderRadius),e.pointerWidth=2*parseFloat(getComputedStyle(e.pointer).borderWidth),e._container.addEventListener("mousemove",(function(t){e.playerView.currentPlayer.isAd()||e.scrubber._isDragging||(e.show(),e.showTooltipAtCursor(t))})),e._container.addEventListener("mouseleave",(function(t){e.hide()}))}},{key:"showTooltipAtCursor",value:function(e){var t=this,i=t.playerView.currentPlayer;if(0!==i.duration&&!0!==i.isAd()){var n=t._container.clientWidth,r=i.fullscreen?e.pageX:e.pageX-Object(d.i)(t._container).x,a=r/n*i.duration;t.label.textContent=Object(d.C)(a),t.move(r)}}},{key:"move",value:function(e){var t=this,i=t._container.clientWidth,n=t.element.clientWidth,r=0;r=e+n/2>i?i-n:e-n/2<0?0:e-n/2,t.element.style.left="".concat(r,"px");var a=e-r-t.pointerWidth/2;a+t.pointerWidth+t.borderRadius>n?a=n-t.pointerWidth-t.borderRadius:a<t.borderRadius&&(a=t.borderRadius),t.pointer.style.left="".concat(a,"px")}},{key:"showTooltipAtValue",value:function(e){var t=this,i=t.playerView.currentPlayer,n=e*t._container.clientWidth,r=e*i.duration;t.label.textContent=Object(d.C)(r),t.show(),t.move(n)}},{key:"show",value:function(){this.element.style.display="block"}},{key:"hide",value:function(){this.element.style.display="none"}}]),e}(),E=function(e){function t(e){var i,n,r;return _(this,t),n=this,r=u(t).call(this,e),i=!r||"object"!==c(r)&&"function"!=typeof r?p(n):r,h(p(i),"_slider",void 0),h(p(i),"_max",void 0),h(p(i),"_current",0),h(p(i),"_videoStartTime",0),h(p(i),"_pixelTimeFactor",1),h(p(i),"_progressEl",void 0),h(p(i),"_bufferEl",void 0),h(p(i),"_container",void 0),h(p(i),"_tooltip",void 0),h(p(i),"handleMediaEvent",(function(e){var t=p(i);switch(e.type){case o.a.Media.Event.DURATION_CHANGE:t._max=e.data,t._current=0,t.playerView.currentPlayer.sourceChanged&&t.invalidate();break;case o.a.Media.Event.CONFIG_CHANGED:case o.a.Media.Event.START_TIME_CHANGED:t.setVideoStartTime(0);break;case o.a.Media.Event.LOAD_PROGRESS:case o.a.Media.Event.LOAD_START:t.updateBuffer();break;case o.a.Media.Event.TIME_UPDATE:t._isDragging||(t._current=e.data,t._slider.setValue(t._current/t._max,0,!1,!0)),t.updateProgress();break;case o.a.Media.Event.STOPPED:t.updateProgress()}})),h(p(i),"handleTimebarClick",(function(e){e.stopPropagation();var t=p(i),n=t._container;if(!(!Object(l.c)(e.target)||t.playerView.currentPlayer.isAd()||null===t.playerView.currentPlayer.duration||t.playerView.currentPlayer.duration<=0)){var r=(t.playerView.fullscreen?window.client.isMobile?e.touches[0].pageX:e.pageX:(window.client.isMobile?e.touches[0].pageX:e.pageX)-Object(d.i)(n).x)/n.clientWidth*t.playerView.currentPlayer.duration;t._dispatchEvent(o.a.UI.Event.SEEK,r)}})),i.playerView=window.PlayerView,i._container=Object(l.a)(o.a.UI.SCRUBBER),i._bufferEl=Object(l.a)(o.a.UI.SCRUBBER_BUFFER),i._progressEl=Object(l.a)(o.a.UI.SCRUBBER_PROGRESS),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),y(t,[{key:"init",value:function(){var e=this;e.updateAppearance(),e._slider=new a.a("scrubber",{handleClass:"scrubber-handle",vertical:!1,horizontal:!0,loose:!0,speed:1,animationCallback:e._onSliderUpdate.bind(e),dragStartCallback:e._onSliderDragStart.bind(e),dragStopCallback:e._onSliderDragStop.bind(e)}),e._slider.reflow(),window.client.isMobile?e._container.addEventListener("touchstart",e.handleTimebarClick):e._container.addEventListener("click",e.handleTimebarClick),e.playerView.addEventListener(o.a.Media.Event.DURATION_CHANGE,e.handleMediaEvent),e.playerView.addEventListener(o.a.Media.Event.CONFIG_CHANGED,e.handleMediaEvent),e.playerView.addEventListener(o.a.Media.Event.START_TIME_CHANGED,e.handleMediaEvent),e.playerView.addEventListener(o.a.Media.Event.LOAD_PROGRESS,e.handleMediaEvent),e.playerView.addEventListener(o.a.Media.Event.LOAD_START,e.handleMediaEvent),e.playerView.addEventListener(o.a.Media.Event.TIME_UPDATE,e.handleMediaEvent),e.playerView.addEventListener(o.a.Media.Event.STOPPED,e.handleMediaEvent),e.playerView.addEventListener(o.a.UI.Event.PLAYER_CHANGED,(function(){var t=e.playerView.currentPlayer;e._max=t.duration,e._current=t.currentTime,e.invalidate()})),e._tooltip=new w(e),e._tooltip.initTooltip(),window.client.isMobile&&(e._mobileDisplayTimer=new b,e._mobileDisplayTimer.init())}},{key:"_onSliderUpdate",value:function(e){this._isDragging&&(this._tooltip.showTooltipAtValue(e),this.updateProgress())}},{key:"_onSliderDragStart",value:function(){var e=this;e._slider&&(e._isDragging=!0,Object(s.a)(e._container,"scrubber-drag"))}},{key:"_onSliderDragStop",value:function(){var e=this;e._slider&&(e._isDragging=!1,e._tooltip.hide(),window.ContentPlayer.seek(e._slider.getValue()[0]*window.ContentPlayer.duration),Object(s.d)(e._container,"scrubber-drag"))}},{key:"updateBuffer",value:function(){var e=this,t=e.playerView.currentPlayer;if(!e._fixedValues){var i=t.buffered*t.duration/100/e._pixelTimeFactor;e._bufferEl.style.width="".concat(100*i/e._container.clientWidth,"%")}}},{key:"updateProgress",value:function(){var e=this,t=e.playerView.currentPlayer;if(!e._fixedValues)if(!t.isAd()||!isNaN(t.duration)&&t.duration){var i=e._isDragging?e._slider.offset.current[0]:t.currentTime/e._pixelTimeFactor;e._progressEl.style.width="".concat(i,"px")}else e._progressEl.style.width="100%"}},{key:"setVideoStartTime",value:function(e){this._videoStartTime=e,this.invalidate()}},{key:"resetWidths",value:function(){var e=this;if(!e._fixedValues){var t=e.videoStartTime&&e._pixelTimeFactor!==1/0?"".concat(e.videoStartTime/e._pixelTimeFactor*100/e._container.clientWidth,"%"):0;e._progressEl.style.width=t,e._bufferEl.style.width=t,e.updateBuffer(),e.updateProgress(),e._slider.reflow()}}},{key:"invalidate",value:function(){var e=this,t=e.playerView.currentPlayer;t&&(e._pixelTimeFactor=t.duration/e._container.clientWidth),e.resetWidths(),e.playerView.currentPlayer.isAd()?e._slider.disable():e._slider.enable()}},{key:"open",value:function(e){this._isOpen||(this._isOpen=!0,this.invalidate())}},{key:"close",value:function(e){this._isOpen&&(this._isOpen=!1)}}]),t}(n.a)}}]);